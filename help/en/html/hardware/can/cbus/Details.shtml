<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>
  <meta name="generator" content=
  "HTML Tidy for Mac OS X (vers 31 October 2006 - Apple Inc. build 15.17), see www.w3.org">
  <meta name="keywords" content="JMRI help MERG CBUS Connecting connection canusb4 network">
  <title>JMRI Hardware Support - CBUS - Tech Details</title>
  <!-- Style -->
  <meta http-equiv="Content-Type" content=
  "text/html; charset=us-ascii">
  <link rel="stylesheet" type="text/css" href="/css/default.css"
  media="screen">
  <link rel="stylesheet" type="text/css" href="/css/print.css"
  media="print">
  <link rel="icon" href="/images/jmri.ico" type="image/png">
  <link rel="home" title="Home" href="/"><!-- /Style -->
</head>

<body>
  <!--#include virtual="/Header" -->

  <div class="nomenu" id="mBody">
    <div id="mainContent">
      <h1>Hardware Support: CBUS - Connection Details</h1>
      
      <em>The
      support on this page is rapidly evolving; the actual code
      might be ahead or behind the documentation on any given
      day.</em>

      <p>This page describes technical details of JMRI's <a href=
      "index.shtml">CBUS</a> connection support.</p>

      <h2>CAN Adapters</h2>
      
      <a href="../images/merg-system-connection.jpg">
      <img align="right" src="../images/merg-system-connection.jpg" 
      width="250" height="130"  alt="JMRI MERG Connections">
      </a>
      
      
      <p>JMRI's general approach is to support as
      many hardware combinations as possible. By supporting as many
      people and their hardware desires as possible, we can create
      a growing community of developers, hence more code.
      <br>
      As part of this, the JMRI CAN support is designed to use
      as many CAN adapter types as possible.</p>
      
      <ul>
      <li><a href="#c1">CAN via MERG CAN-RS or CAN-USB</a></li>
      <li><a href="#c2">CAN via MERG Network Interface</a></li>
      <li><a href="#c3">CAN via GridConnect adapter</a></li>
      <li><a href="#c4">CAN via GridConnect Network Interface</a></li>
      <li><a href="#c5">CAN via Lawicell CANUSB</a></li>
      <li><a href="#c6">CAN Simulation</a></li>
      <li><a href="#c7">Direct Serial Connection</a></li>
      </ul>
      
      <h3>CBUS CAN Network ID</h3>
      
        <p>All CBUS modules need a CBUS CAN ID, and JMRI is no exception.</p>
        
        <p>Modules must not have a duplicate CAN ID</p>
        
        <p>The CAN ID is separate to any NODE ID's used in Long Events.</p>

        <p>The MERG CAN-RS can do "enumeration" for CBUS, but many
        other adapters can't because of their intrinsic latency.
        Their slow replies effectively make them invisible.
        <br>
        Therefore Mike Bolton, one of the CBUS developers
        suggested that JMRI use a CBUS ID of 126. That's a
        fixed value in some systems.</p>
      
        <p>Default setting shown on right hand side after the " : " </p>
      
      <h3>Connecting to JMRI via</h3>
      <h4><a name="c1" id="c1">CAN via MERG CAN-RS or CAN-USB</a></h4>
      
        <a href="../images/merg-connection-canrs-canusb-350x250.jpg"><img src="../images/merg-connection-canrs-canusb-350x250.jpg"
      width="350" height="250" alt="JMRI MERG Connection canrd canusb canusb4 adapter" align=
      "right"></a>
      
      
        <p>Serial Port - Select the serial or USB port that your CAN interface is plugged in to.</p>
        <p>Connection Prefix : "M"</p>
        <p>Connection Name : "MERG"</p>
        <h5>Additional Connection Settings shown when box checked</h5>
        <p>Baud Rate : 57,600 ( higher speeds selectable on dropdown )</p>
        <p>CAN ID for CAN-USB : 126 ( selectable from 120-127 )</p>
        <p>Connection Protocol : "MERG CBUS" ( "OpenLCB", "Raw CAN" and "Test - do not use" also selectable ) </p>   
        <p>nb, CANUSB4 - does not require drivers installing on modern operating systems.</p>
      
      <h4><a name="c2" id="c2">CAN via MERG Network Interface</a></h4>
      <a href="../images/merg-connection-network-interface-278-358.jpg"><img src="../images/merg-connection-network-interface-278-358.jpg"
      width="278" height="358" alt="JMRI MERG Connection network interface" align=
      "right"></a>
      
      
      
        <p>Methods using this option include :</p>
        <ul>
        <li>PiCAP</li>
        <li>CANether</li>
        <li>CBUS Server</li> 
        </ul>  

 
        <p>IP Address / Host Name : ( none ) - enter an IP address for fully manual configuration.  Optional hostname for ZeroConf / mDNS configuration. 
        <br>
        "localhost" can be used on some systems if running on the same machine as a CBUS Server.
        </p>
        <p>TCP / UDP Port : 5550 - Port address setting of the TCP connection</p>
        <p>Connection Protocol : "MERG CBUS" ( "OpenLCB", "Raw CAN" and "Test - do not use" also selectable ) </p>   
        <p>Connection Prefix : "M"</p>
        <p>Connection Name : "MERG"</p>
        <h5>Additional Connection Settings shown when box checked</h5>
        <p>CAN ID for CAN-USB : 126 ( selectable from 120-127 )</p>
        <p>Gateway : Pass All ( Filtering also selectable )</p>        
 
 
      <h4><a name="c3" id="c3">CAN via GridConnect adapter</a></h4>
      <a href="../images/merg-connection-gridconnect-adapter-343x223.jpg"><img src="../images/merg-connection-gridconnect-adapter-343x223.jpg"
      width="200" height="131" alt="JMRI MERG GridConnect Adapter" align=
      "right"></a>
      
        <p>Serial Port - Select the serial or USB port that your CAN interface is plugged in to.</p>
        <p>Connection Prefix : "M"</p>
        <p>Connection Name : "MERG"</p>
        <h5>Additional Connection Settings shown when box checked</h5>
        <p>Baud Rate : 57,600 ( higher speeds selectable on dropdown )</p>
        <p>Connection Protocol : "MERG CBUS" ( "OpenLCB", "Raw CAN" and "Test - do not use" also selectable ) </p>
      
      
      
      <h4><a name="c4" id="c4">CAN via GridConnect Network Interface</a></h4>
        <a href="../images/merg-connection-gridconnect-network-interface-280x329.jpg"><img src="../images/merg-connection-gridconnect-network-interface-280x329.jpg"
      width="200" height="235" alt="JMRI MERG GridConnect Network Interface" align=
      "right"></a>
        <p>IP Address / Host Name : ( none ) - enter an IP address for fully manual configuration.  Optional hostname for ZeroConf / mDNS configuration. </p>
        <p>TCP / UDP Port : 0 - Port address setting of the TCP connection</p>
        <p>Connection Protocol : "MERG CBUS" ( "OpenLCB", "Raw CAN" and "Test - do not use" also selectable ) </p>   
        <p>Connection Prefix : "M"</p>
        <p>Connection Name : "MERG"</p>
        <h5>Additional Connection Settings shown when box checked</h5>
        <p>Gateway : Pass All ( Filtering also selectable )</p>  
      
      
      <h4><a name="c5" id="c5">CAN via Lawicell CANUSB</a></h4>
      <a href="../images/merg-connection-lawicell-340x358.jpg"><img src="../images/merg-connection-lawicell-340x358.jpg"
      width="200" height="211" alt="JMRI MERG Lawicell USB Connection" align=
      "right"></a>
        <p>Serial Port - Select the serial or USB port that your CAN interface is plugged in to.</p>
        <p>Connection Prefix : "M"</p>
        <p>Connection Name : "MERG"</p>
        <h5>Additional Connection Settings shown when box checked</h5>
        <p>Baud Rate : 57,600 ( higher speeds selectable on dropdown )</p>
        <p>Connection Protocol : "MERG CBUS" ( "OpenLCB", "Raw CAN" and "Test - do not use" also selectable ) </p>   
      
      
      
      <h4><a name="c6" id="c6">CAN Simulation</a></h4>
      
             <a href="../images/merg-connection-simulation-343x363.jpg"><img src="../images/merg-connection-simulation-343x363.jpg"
      width="200" height="211" alt="JMRI MERG CAN Simulation Connection" align="right"></a>
      
      
        <p>Known issue - Does not simulate sending DCC throttle commands, see <a href="https://github.com/JMRI/JMRI/issues/2065">https://github.com/JMRI/JMRI/issues/2065</a></p>
      
        <p>Serial port : ( none )</p>
        <p>Connection Prefix : "M"</p>
        <p>Connection Name : "MERG"</p>
        <h5>Additional Connection Settings shown when box checked</h5>
        <p>Baud Rate : None ( grayed out dropdown unselectable )</p>
        <p>Connection Protocol : "MERG CBUS" ( "OpenLCB", "Raw CAN" and "Test - do not use" also selectable ) </p>       
      
      
      
      <h4><a name="c7" id="c7">Direct Serial Connection</a></h4>
      
        <a href="../images/merg-connection-direct-serial-335x323.jpg"><img src="../images/merg-connection-direct-serial-335x323.jpg"
      width="335" height="323" alt="JMRI MERG Direct Serial Connection RfID" align=
      "right"></a>
      
        <p>Serial Port Select- Choose the serial or USB port that your CAN interface is plugged in to.</p>
        <p>Concentrator range Select : "A-H" , unselectable in grayed out select box</p>
        <p>Device Type Select : "MOD-RFID125", unselectable in grayed out select box</p>
        <p>Adapter Select : Generic Stand-alone ( MERG Concentrator alternate option, choosing this allows the Concentrator Range select, with an additional "I-P" option )</p>
        <p>Protocol Select : CORE-ID 
        <br>Alternate option - Olimex, enables a device type of MOD-RFID1356MIFARE in the device type dropdown.
        <br>Alternate option - Parallax
        <br>Alternate option - SeeedStudio
        <br>Alternate option - EM-18
        </p>
        <p>Connection Prefix : "F"</p>
        <p>Connection Name : Rfid</p>
        <h5>Additional Connection Settings shown when box checked</h5>
        <p>Baud rate Select : automatic ( unselectable, grayed out select box )</p>
      

      
      <h3>JMRI Help</h3>

        <p><a href="index.shtml">Main JMRI CBUS Help page</a></p>

        <p><a href="../index.shtml">JMRI's general CAN support</a></p>
      <!--#include virtual="/Footer" -->
    </div><!-- closes #mainContent-->
  </div><!-- closes #mBody-->
</body>
</html>