<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<!-- $Id: DS54.shtml,v 1.1 2008-01-13 04:24:44 jacobsen Exp $ -->
<html lang="en">
<head>
    <TITLE>
 	JMRI: DS54 Examples
    </TITLE>
    <META content="Bob Jacobsen" name=Author>
    <meta name="keywords" content="JMRI LocoNet DS54">

<!-- Style -->
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<LINK REL="stylesheet" TYPE="text/css" HREF="/css/default.css"
	MEDIA="screen">
<LINK REL="stylesheet" TYPE="text/css" HREF="/css/print.css"
	MEDIA="print">
<LINK REL="icon" HREF="/images/jmri.ico" TYPE="image/png">
<LINK REL="home" TITLE="Home" HREF="/">
<!-- /Style -->
</HEAD>

<BODY>
<!--#include virtual="/Header" -->

  <div class="nomenu" id="mBody">
    <div id="mainContent">

	    <H1>JMRI: DS54 Examples</H1>
		<p class=subtitle>
		    Examples of using a Digitrax DS54 with JMRI.
		</p>
The DS54 accessory decoder can be configured in a large number of
ways.  
(<A href="../../../apps/DecoderPro">DecoderPro</a> can help with that)

<P>
Walter Thompson walked through the details of this:

<P>
With the ds54 at defaults these are the  Loconet msgs when either Switch A
or Aux A goes positive causing the Turnout to "toggle" state:
<BR>
When Switch A (blue lead) goes high loconet msg b2 8 70 35.
<BR>
When Aux A (orange lead) goes high loconet msg b2 8 50 15

<P>
I then set "When Switch A input changes, send" ="Turnout feedback msg"
<BR>
When Switch A (blue lead) goes high loconet msg b2 8 70 36
<BR>
When Aux A (orange lead) goes high loconet msg b2 8 50 15

<P>
I then set "When Aux A input changes, send"= "Turnout feedback message"
<BR>
When Switch A (blue lead) goes high loconet msg b2 8 70 36
<BR>
When Aux A (orange lead) goes high loconet msg b2 8 50 16

<P>
Therefore, when the Switch and Aux inputs are set to send a turnout 
feedback message, the feedback mechanisms built into recent versions
of JMRI can be used to track the turnout state when the local
inputs are used to change the turnout.

<h2>Exact Feedback</h2>

To use exact feedback, you need to connect two microswitches to the 
turnout and to the Switch and Aux inputs on the DS54. 
<P>
Configure the DS54 channel with:
<PRE>
 Aux A input"='Active ON, trigger on change, Postive Level"
 Aux A task"="No Output change"
 When Aux A input changes, send"= "Exact turnout feedback message"
 Switch A input"='Active ON, trigger on change, Postive Level"
 Switch A task"="No Output change"
 Switch A input changes, send"= "Exact turnout feedback message"
</PRE>
Configure the Turnout (via the Turnout Table) to use "EXACT" feedback.

Start with the turnout closed, Switch A would be Closed and Aux A open .
Issue Thrown command from DT400; Loconet msgs b0 8 10 57 and b0 8 0 47.

Open Switch A, turnout starts to move; loconet msgs b1 8 60 26,
Turnout 9 Switch input is Thrown (input on)

Close Aux A, turnout had reached thrown state, loconet msg b1 8 50 16.
Turnout 9 Aux input is Closed (input off)

Now i issue a Close cmd from the DT400; loconet msgs b0 8 30 77 and b0 8 20 67
Open Aux A, turnout starts to move; loconet msg b1 8 40 6
Turnout 9 Aux input is Thrown (input on)

close Switch A, turnout had reached closed state; loconet msg b1 8 70 36.
Turnout 9 Switch input is Closed (input off)

<!--#include virtual="/Footer" -->
</body>
</html>

