<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html lang="en">
<head>
  <meta name="generator" content=
  "HTML Tidy for Mac OS X (vers 31 October 2006 - Apple Inc. build 15.17), see www.w3.org">

  <title>JMRI: WiFi Throttle</title>
  <!-- Style -->
  <meta http-equiv="Content-Type" content=
  "text/html; charset=us-ascii">
  <link rel="stylesheet" type="text/css" href="/css/default.css"
  media="screen">
  <link rel="stylesheet" type="text/css" href="/css/print.css"
  media="print">
  <link rel="icon" href="/images/jmri.ico" type="image/png">
  <link rel="home" title="Home" href="/">
  <!-- /Style -->
</head>

<body>
  <!--#include virtual="/Header" -->
  <div class="nomenu" id="mBody">
    <div id="mainContent">

      <h1>JMRI: WiFi Connected Throttle</h1>The WiThrottle window controls the
      connection between WiFi throttles, e.g. an iPhone, iPod
      Touch, or Android Phone, and JMRI.

      <p>It can be set to start automatically with the "<a href=
      "../../../apps/TabbedPreferences.shtml#Startup">Start Up</a>"
      section in the "<a href=
      "../../../apps/TabbedPreferences.shtml">JMRI
      Preferences</a>".</p>

      <p><a href=
      "../../../apps/TabbedPreferences.shtml#WiThrottle">Preferences</a>
      for the WiFi throttles can be found in the JMRI Preferences
      under the heading WiThrottle.</p>

      <p>This utility broadcasts its connection information across
      all local networks, so it can be picked up by any device
      looking for the service. This eliminates having to enter
      connection information into the device. If the computer
      running JMRI is protected by a software firewall, you may
      need to add an exception for JMRI or disable the firewall
      to allow the WiFi throttle to connect.</p>

      <p>When using a WiFi throttle, if the computer enters sleep
      mode, control will be lost. System preferences may need to be
      adjusted to prevent the computer from putting itself to sleep
      when it is inactive. 
      <a href=
      "http://enginedriver.mstevetodd.com"><img src=
      "images/EngineDriverScreen.png" height="200" width="120"
      align="right" style="margin:20px;" alt=
      "EngineDriver for Android devices" title=
      "EngineDriver for Android devices"></a> 
      
      <a href=
      "http://withrottle.com"><img src="images/WiT150x250.png"
      height="250" width="150" align="right" alt=
      "WiThrottle for Apple devices" title=
      "WiThrottle for Apple devices"></a> 
      
      <a href=
      "https://play.google.com/store/apps/details?id=digitrainspro.digitrainspro.hu">
      <img src="https://lh3.googleusercontent.com/GImAaAj7eFkLrMk2e8obXFW465F-C07FNlwXmzvP6HOQkPQ2rCg0d2BnTFy34Y-HYQ=s180" height="120" width=
      "120" align="right" style="margin:20px;" alt=
      "DigiTrainsPro for Android devices" title=
      "DigiTrainsPro for Android devices"></a>
      
      </p>

      <p>To use your iPhone, iPad or iPod Touch with JMRI as a
      throttle, you run the <a href=
      "http://withrottle.com">WiThrottle</a> app on the iPhone or
      iPod Touch. The basic application is available for free
      download from the iTunes store.</p>

      <p>To use your Android device with JMRI as a throttle, you
      run the <a href="http://enginedriver.mstevetodd.com">Engine
      Driver</a> app 
      (available from available from the <a href=
      "https://play.google.com/store/apps/details?id=jmri.enginedriver">
      Google Play Store</a> or the <a href=
      "http://enginedriver.mstevetodd.com">EngineDriver site</a>)
      or <a href=
      "https://play.google.com/store/apps/details?id=digitrainspro.digitrainspro.hu">
      DigitrainsPro</a> on the Android device
      (available from the <a href=
      "https://play.google.com/store/apps/details?id=digitrainspro.digitrainspro.hu">
      Google Play Store</a>).
    
      </p>

      <p>You can connect from a Windows computer using the
      <a href="https://www.microsoft.com/en-us/p/train-throttle/9nblggh4vf5j?activetab=pivot:overviewtab">Train Throttle Windows App</a>
      available on the 
      <a href="https://www.microsoft.com/en-us/p/train-throttle/9nblggh4vf5j?activetab=pivot:overviewtab">Microsoft store</a>.
      
      <p>You can use any of these devices via the same or a different (remote) 
      network than the one that your JMRI computer is running on.  See below
      for more information on remote use of mobile devices.</p>
      
      <p>The protocol is described on a <a href=
      "Protocol.shtml">separate page</a>. For more on JMRI
      networking, see the <a href=
      "../../../../html/doc/Technical/Networking.shtml">networking
      technical page</a>.</p>

      <p>You can also <a href=
      "../webThrottle/webThrottle.shtml">use a web browser</a> in
      your device to <a href="../webThrottle/webThrottle.shtml">run
      trains</a> if for some reason you can't install an app on the
      device.</p>

      <h3>Function Labels</h3>Function labels can be customized for
      each roster entry through JMRI, using the Labels &amp; Media
      button. These labels will then be displayed in place of the
      generic F1, F2... on the screen of the mobile device. The
      labels can be added when a new roster entry is created, or by
      editing an existing roster entry under the Function Labels
      tab.

      <h3>Routes &amp; Turnouts</h3>The app can control any
      turnouts (and routes) that JMRI can control. NOTE:
      By default, EngineDriver only lists turnouts and routes which 
      have User Names. This can be changed in EngineDriver Preferences.

      <p>Additionally, you can limit what turnouts appear. In JMRI,
      with the WiThrottle window active, there is a menu named
      WiThrottle. It has an item titled "Routes and Turnouts" that will
      let you pick which turnouts to display or hide.</p>

      <h3>Advanced Consisting</h3>There are now two options for how
      Advanced (or Decoder Assisted) Consisting is handled. This
      can be selected from the <a href=
      "../../../apps/TabbedPreferences.shtml#WiThrottle">WiThrottle</a>
      portion of JMRI Preferences.

      <p>The default is <b>NMRA Format</b>. This will build a
      consist using NMRA consisting commands. It does not use any
      techniques specific to the connected DCC system. This allows
      WiFi throttles to work in a DCC manufacturer independent way.
      These consists may perform better for building and
      controlling with WiFi devices.</p>

      <p>The second option is <b>DCC Brand-Specific</b> which will
      build consists in a manner where they will function as though
      built using a throttle from the DCC manufacturer. This will
      follow manufacturer specific features as to how consists are
      built and controlled. These consists should perform better
      when built with a WiFi device, but controlled by a throttle
      from the DCC manufacturer of your system.</p>
      
      <h2>Using A Remote Mobile Device Throttle</h2>
      <!-- Section added by Jerry Grochow 2018-09-29 -->
	  
 <p>Typically, people using smartphones or tablets as throttles are physically in the same room as the layout
 they are controlling.  Mobile device throttles, however, can be operated from anywhere in the world,
 significantly adding to the fun of model railroading by making it possible to share control of a layout with
 family or friends many miles away.</p>

 <p>Setting up a mobile device throttle is straighforward, as discussed above.  Apps such as the similarly named WiThrottle
 (for IOS devices) and EngineDriver (for Android devices) will either recognize that JMRI WiThrottle 
 Server is transmitting or ask you to connect to the server manually by entering its IP address and 
 port.  The WiThrottle Server displays its broadcast IP address and port in the top section of the WiThrottle
 window.  If you are using a typical home router, this will begin with 192 or 10 and consist of four parts,
 for example 192.168.0.103.  This "internal" IP address will only be recognized by other devices connecting
 to the same local network.</p>

 <p>Setting up for a remote mobile device throttle requires some additional steps. If the mobile device you are
 going to use as a throttle is connecting to a different network than your
 local network (as, for example, is obviously the case if the remote operator is in another city),
 that mobile device will have to be told the "external" or "public" address of your JMRI computer and a port
 number that will allow it to connect remotely to your JMRI computer.  You can look up the public IP address
 for your local router either by logging into the router's administrative portal or using a browser on your
 JMRI computer to go to the web site <a href="https://whatismypublicip.com">WhatIsMyPublicIP.com</a> or
 similar.  You then have to create a link between that IP address and a port number to the internal IP address
 and port number of the JMRI WiThrottle Server.  This is called "port forwarding" and needs to be set up on
 your local router.  Setting up port forwarding varies with the model of router so we won't attempt to give
 specific instructions on how to do that.  However, detailed instructions can usually be found on the internet
 and the topic has been addressed in the JMRI online forum as well.</p>

<p>Once you have determined the public address of your JMRI computer and set up port forwarding 
 to the WiThrottle Server, you enter this information into the throttle app on your mobile device. 
 You will know you have been successful when your mobile device's name appears in the WiThrottle Server
 window and your engine roster appears on your app.

<p>TROUBLESHOOTING: if you get an error or your mobile device app doesn't appear to connect, check that
 you have the correct internal and public IP addresses (which may change from day to day due to the way
 your network router and internet service provider assign addresses), correct port number, and that you
 saved the port forwarding information to your router's memory.</p>
 
<p>Now all you have to do is provide a way for the remote engineer to talk with you and see your layout
 while he or she takes control of your JMRI-enabled layout via a mobile device throttle from anywhere in
 the world!  [FYI: use FaceTime or Skype or some other video system that provides realtime communication
 for this purpose.  It is generally not recommended to use remote monitoring cameras such as are used for
 baby monitoring or security cameras as most introduce a several second delay -- something that could lead
 to some very interesting railroad accidents!]</p>

      <!--#include virtual="/Footer" -->
    </div>
  </div>
</body>
</html>
