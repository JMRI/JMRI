<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<!-- $Id: Operations.shtml,v 1.5 2008-09-06 17:20:23 dan_boudreau Exp $ -->
<HTML LANG="en">
<HEAD>
<TITLE>Operations</TITLE>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META CONTENT="Dan Boudreau" NAME="Author">
<META NAME="keywords" CONTENT="JMRI Help NCE Edit Macro ">

<!-- Style -->
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<LINK REL="stylesheet" TYPE="text/css" HREF="/css/default.css"
	MEDIA="screen">
<LINK REL="stylesheet" TYPE="text/css" HREF="/css/print.css"
	MEDIA="print">
<LINK REL="icon" HREF="/images/jmri.ico" TYPE="image/png">
<LINK REL="home" TITLE="Home" HREF="/">
<!-- /Style -->
</HEAD>

<BODY>
<!--#include virtual="/Header" -->

<H2>JMRI Operations</H2>

The operations program allows you to build computer generated car
manifests for your railroad. A manifest or switch list defines where a
car is located on the railroad and how and where it should be eventually
positioned on the railroad. The program allows you to build a roster of
cars, define locations on the railroad, and routes for trains to travel.
The car roster includes information about the car, including road name,
type of car, color, length, date built, and its owner. Trains are
assigned routes that define locations where cars can be picked up or
dropped. Features include the ability to define what car types and car
road names a location can service, the available track space for a
location, and the maximum length the train can be between any two
locations on the route. Locations can have sidings, yards, staging and
interchange tracks. Optionally, trains can be configured to require a
caboose or car with FRED. The program generates car manifests for each
train and optionally for any location. The program can also place icons
representing trains on a JMRI panel. The icon can be taught to move in
the panel along with the train from location to location.

<H3>Quick Start Help</H3>

In the top level menu for JMRI find the "Tools->Operations" menu. There
are five items in this menu. We recommend that you start with "Settings"
and work your way down to "Trains".

<A NAME="Settings"></A>
<H2>Settings</H2>

This is where you provide the name of your railroad and the direction
the trains travel on your railroad. Enter the railroad name in the field
across from "Railroad Name".

<H3>Train Directions</H3>

If your railroad depicts trains traveling north and south select the
"North/South" box, if your trains travel east and west select the
"East/West" box. You must select at least one direction, and can if
desired select both.

<H3>Maximum Train Length</H3>

Now enter the default "Maximum Train Length" you desire for your trains.
This field provides the maximum default train length between cities.
Later you can override this length if you wish a longer or shorter train
between any two locations. A 1000 foot train can carry approximately 20
cars, and is of course dependent on the car lengths assigned to the
train.

<H3>Maximum Number of Engines</H3>

Now set the maximum number of engines that you want the program to
assign to a train. If you don't want the program assigning engines, set
this value to 0.

<H3>Scale</H3>

Next select the scale you are modeling. This is useful when you enter
the length of cars and tracks. You can enter the number of actual inches
and the program will convert to scale feet. Append a double quote to the
length when entering actual inches. The program will also automatically
assign the proper NMRA weight for a car based on scale and length.

<H3>Train Icons</H3>

If you want the operations program to place an icon representing the
train on a panel, add the panel name, otherwise leave the name blank to
disable. The "Enable Train Icon SetX&Y" when selected allows you to
teach the operations program where to place the train icon on your panel
when moving your train from location to location. Deselect this feature
after your done teaching the program to prevent accidentally changing
the train icons position on your panel. If you also want the lead engine
name as part of you train icon text, select the "Append Engine Number"
box. You can select the background color of your train icon depending on
the train's direction. Select the color desired for each direction using
the pull down menus.

<H3>Owner Name</H3>

And finally enter your name in the "Owner" field and push the "Save"
button to save your settings. Use the close (red X upper right corner)
button to hide the settings panel.

<A NAME="Locations"></A>
<H2>Locations</H2>

Locations are places on your railroad that trains visit to pickup or
drop off cars. Select "Tools->Operations->Locations" to add or edit the
locations on your railroad. To add a location, press the "Add" button
located on the bottom of the "Locations" panel. A new panel should
appear. In the "Add Location" panel, enter the name of the location in
box across from "Name". The location name must be unique; the program
will not allow two locations with identical names. Now press the "Add
Location" button at the bottom of the panel. The various fields that
were disabled should now appear. 

<p>Each location can have several yard,
siding, interchange or staging tracks. Yards are where cars are placed
for temporary storage. A siding can be an industry or any place where a
car is loaded or unloaded. For a train to service a location, there must
be at least one track for that location. See below how to add tracks to
your location.

<H3>Location Service Direction</H3>

You can decide which train direction the location can service. For
example, if only south bound trains can access the location select
"South" and deselect the other directions. This can be useful if you
want to only support trailing point switching for a given location. If a
location can support multiple directions then select the ones that are
appropriate.

<H3>Location Car Types</H3>

You can control the type of cars a location can service. Push the
"Clear All" to deselect all car types, or "Select All" to select all car
types, then select or deselect the car types you wish the location to
accept.

<A NAME="Yards"></A>
<H3>Yards</H3>

To add a yard, press the "Add Yard Track" button. Now enter the name of the
yard along with the length of the track in scale feet or in actual
inches. Append a double quote (") to the length when entering actual
inches and the program will convert the length into scale feet.  Press the "Add
Yard Track" button at the bottom of the panel and the disabled fields should now
appear.

<H3>Car Types Serviced</H3>

You can control what type of cars the yard can service. Note that the yard
car types
are restricted to the ones that the location can service.  If a car type
that you wish doesn't appear for a yard, confirm that the location's car
types are properly selected. If the car type you want doesn't exist for
a location, you will have to create the car type using the "Cars"
panels, see <a href="#Cars">Cars</a> below.

<H3>Car Road Names Serviced</H3>

You can also restrict which roads a yard can service. Select "Accept
Only" if you want to build a list of car roads that the yard will
accept. Select "Exclude" if you want to build a list of car roads that
you want to exclude from the yard.

<H3>Comment</H3>

You can enter an optional comment for the yard.

<H3>Save Yard</H3>

Press the "Save Yard Track" to save your work. The program will create a
file in your JMRI directory in a folder called "operations".

<A NAME="Sidings"></A>
<H3>Sidings</H3>

To add a siding, press the "Add Siding" button. Siding are very simular
to <a href="#Yards">Yards</a>, so see above for more infomation.

<H3>Local Switcher</H3>

If you want only a local switcher to service a siding, deselect all of
the direction boxes for that siding. The program will only allow a train
that has one location in its route (local switcher) to service the
siding. This would be useful if you wanted your trains to pick up and
drop cars to a yard, and then have a local switcher move them to the
town's sidings.

<H3>Why are there Yards and Sidings?</H3>

The program when generating a switch list for a single location (local
switcher) will never move a car from a siding to a siding or yard to a
yard, only yard to siding or siding to yard.

<A NAME="Interchange"></A>
<H3>Interchange Tracks</H3>

If you want the program to force the exchange of cars between trains you
need to define an interchange track. Cars dropped off to an interchange
track by a train on a given route will not be picked up by any train
using that route. Another train with a different route is required to
pickup the cars. For example, you might have a branch line that picks up
and drops off cars from a terminal. By defining the track as an
interchange, once the branch line train setouts cars, they will remain
there until the main line train stops to service the terminal's
interchange track.

<A NAME="Staging"></A>
<H3>Staging Tracks</H3>

A staging track allows you to have all cars in a train delivered to one
track. When departing a location with a staging track, all cars in
staging will be assigned to the train. A location can have multiple
staging tracks, but can't have any other types of tracks, sidings,
yards, etc. Note if you are running a train to and from the same staging
track, you must define two staging tracks for the program, one to depart
on and one to return on. Physically the two staging tracks can be the
same one.

<p>If you require a train leaving staging to have a certain number
of engines, engine model, or road name; the program will search all
staging tracks at the departure location for a train meeting those
requirements. If you set the engine requirements to 0, the program will
select the next available train from staging; and will ignore the number
of engines leaving that staging track. See <a href="#TrainRequires">Train
Requires</a> for more info.</p>

<H3>Looping Trains through Staging</H3>

Sometimes for operations a train enters staging at one location (call it
A) and then later departs at another location (call it B). From an
operations perspective locations A and B are locations not directly
connected by trains. So we need to relocate engines and cars from
location A to B so the operations manifest can make sense. One way to do
this is to terminate the train into staging at location A. Then create a
"virtual" train that simply moves the cars from location A staging to
location B staging. Doing this causes the program to "move" the train
and its cars from A to B which is really the same physical track. Later
you can build a train that departs location B, and the manifest will
show that the train originated from B and not A.

<A NAME="Cars"></A>
<H2>Cars</H2>

The cars panel allows you to edit your car roster. You must enter a
car's number, road, type, length, color, and weight. You can optionally
add the car's build date and owner. If you want a group of cars to be
switched as a unit, you can create a "kernel". You can assign any number
of cars to a kernel but the type of the first car assigned will be used
by the program to determine if the kernel is allowed at a location. The
entire length of the kernel is used to determine if the cars in the
kernel will fit.

<H3>Importing Cars from a File</H3>

<P>If you already have a list of cars in a database, you can import
the cars into the program. The import function requires an ACSII text
file, with one line for each car. The import order is car number, car
road name, car type, car length, car weight, car color. The following
shows two examples of the correct format:</P>

<BR>
336 GCR Flat 40 3.8 Tuscan
<BR>
655578 UP Boxcar 40 3.8 Yellow

<P>Each line can start with a space and multiple spaces between
fields is okay. Optionally you can include additional information in the
following order, owner name, date built, and location. The location can
have two fields, the location name followed by the location's siding or
yard name separated by a hyphen. The following shows two examples of the
correct format:</P>

<BR>
336 GCR Flat 40 3.8 Tuscan AT 1930 Home Town USA - George's Oil Terminal
<BR>
655578 UP Boxcar 40 3.8 Yellow DB 1934 York - York Freight

<P>To import a file, use the "Tools" menu in the upper left hand
corner of the Tools->Operations->Cars menu. Then select
"Tools->Roster->Import from file". Note that the program will only add
cars that don't exist in the program's car roster. It the car already
exists, the import will be skipped by the program.  You must also create the
locations before importing the cars into the operations program.</P>

<A NAME=CarsEdit></A>
<H3>Adding Cars to your Roster</H3>

To manually add a car to your roster, press the "Add" button located at
the bottom of the "Tools->Operations->Cars" panel. Then select the road
for the car. If the desired road doesn't exist, press the "Edit" button
across from the road select menu box. This will allow you to add a new
road or delete any that you don't need.

<H3>Car Number</H3>

Now enter the car's number in the text box. The program requires a
unique road name and road number for each car. If you have cars with
identical roads and numbers, simply add a -1, -2, etc. to each of the
car numbers. The program when printing out the manifest or switch list 
will drop the
-1, -2, etc. from the car's road number.

<H3>Car Type, Length, Color, Weigth</H3>

Select the car's type, length, and color from the menu boxes. Use the
"Edit" button to add or delete car types, lengths, or colors that you
want to add or remove. The car weight is automatically calculated, but
you can enter a different weight if necessary.

<H3>Caboose, FRED, Hazardous</H3>

If the car is a caboose, has a FRED (Flashing Rear End Device), or is
hazardous, select the proper box. The program uses the caboose and FRED
functions to place the car at the end of a train when the train requires
a caboose or car with FRED. The hazardous checkbox will cause the
program to add a note to the switch list that the car is transporting
hazardous materials. Your railroad's policy regarding hazardous
materials can than be applied to this car!

<H3>Car Location</H3>

Now set the car's location on the layout. If the car is off the layout,
set the location to none (blank space).

<H3>Kernel, or Group of Cars</H3>

If wish this car to be part of a kernel which is a group of cars that
you want to switch as one unit, press "Edit" across from "Kernel" and
enter a kernel name. Then select the kernel from the menu box.

<H3>Optional Fields</H3>

Finally you can optionally enter the build date, owner and comment for
this car.

<H3>Save</H3>

Press "Save" to store the car's settings. The program will create a file
in your JMRI directory in a folder called "operations".

<A NAME="EditCarAttributes">
<H3>Edit Car Attributes</H3>

To the right of each of the car attributes (Road, Type, Length, Color,
Kernel, Owner) is an "Edit" button.  Use this to add, delete, or replace
the available attributes for a car.

<H3>Add Button</H3>

To add a new car attribute, enter the desired text in the text box and
press the "Add" button.

<H3>Delete Button</H3>

To delete a car attribute, select the attribute you want to delete in
the menu box and press the "Delete" button.

<H3>Replace Button</H3>

If you need to change a specific car attribute (road, type, color, etc)
in your entire car roster, you can use the "Replace" button found at the
bottom right of the edit car attribute panel. For example, if you wish to change
the car road name attribute "UP" to "UPS" for all of your cars. Press
the "Edit" button for any of your cars in the Cars panel, and then press
the "Edit" button across from Road in the "Car Edit" panel. Enter the
new road "UPS" in the top box, select "UP" in the menu box, and press
"Replace". All cars with "UP" as their road will now have "UPS" as their
road name.

<A NAME=CarsSet></A>
<H3>Car Set Location Button</H3>

After creating a car, you can set the car's location, and optionally the
car's destination and train. Normally the car's destination and assigned
train are generated by the program, but you can use these fields to
force a car to a specific location using a specified train. 

<A NAME="Engines"></A>
<H2>Engines</H2>

The engines panel allows you to edit your engine roster. You must enter
an engine's number, road, model, length. You can optionally add the
engine's build date and owner. If you want a group of engines to be
assigned as a unit, you can create a "consist". All engines are assigned
the car type "Engine". This will allow you to control where engines are
picked up and or stored at the various locations on your layout.

<H3>Import Engines</H3>

If you already have a list of engines in your JMRI roster or in a
database, you can import the engines into the program. To get your
engines from your JMRI roster, select "Import from JMRI roster" from the
Tools->Operations->Engines->Tools menu. Only engines that don't exist
will be added to the programs engine roster. This way you can use this
tool anytime you add engines to your JMRI engine roster. The JMRI engine
roster doesn't have the length field, so a default length is entered for
you. You should correct the engine length if you want the program to
correctly calculate your train lengths.

<H3>Import Engines from a File</H3>

<P>The import from file function requires an ACSII text file, with
one line for each engine. The import order is engine number, engine road
name, engine model, engine length, engine weight, engine color. The
following shows two examples of the correct format:</P>

<BR>
236 UP RS4 40 <BR>
5578 SP SW1200 42

<P>Each line can start with a space and multiple spaces between
fields is okay. Optionally you can include additional information in the
following order, owner name, date built, and location. The location can
have two fields, the location name followed by the location's siding or
yard name separated by a hyphen. The following shows two examples of the
correct format:</P>

<BR>
236 UP RS4 40 AT 1930 Home Town USA - Engine Terminal <BR>
5578 SP SW1200 42 DB 1934 York - York Engine Yard

<P>To import a file, use the "Tools" menu in the upper left hand
corner of the Tools->Operations->Engines menu. Select
"Tools->Roster->Import. Note that the program will only add engines that
don't exist in the program's engine roster. It the engine already
exists, it will be skipped by the program.</P>

<A NAME="EnginesEdit"></A>
<H3>Adding Engines to your Roster</H3>

To manually add an engine to your roster, press the "Add" button located
at the bottom of the "Engines" panel. Then select the road for the
engine. If the desired road doesn't exist, press the "Edit" button
across from the road select menu box. This will allow you to add a new
road or delete any that you don't need. Now enter the engine's number,
model, and length. Now set the engine's location on the layout. If the
engine is off the layout, set the location to none (blank space). If
wish this engine to be part of a consist, press "Edit" across from
"Consist" and enter a consist name. Then select the consist name from
the menu box. Finally you can optionally enter the build date, owner and
comment for this engine. Press "Save" to store the engine's settings. 

<A NAME=EnginesSet></A>
<H3>Engine Set Location Button</H3>

After creating an engine, you can set the engine's location, and optionally the
engine's destination and train. Normally the engine's destination and assigned
train are generated by the program, but you can use these fields to
force an engine to a specific location using a specified train. 

<A NAME="Routes"></A>
<H2>Routes</H2>

A route is a list of locations that a train will visit. Later you can
decide if the train stops at a location for work. Routes can be point to
point or out and back. To build a route, select
"Tools->Operations->Routes". Then press the "Add" button located at the
bottom of the page. Enter the route name. Each route must have unique
name. Then press the "Add Route" button located at the bottom of the
panel. Now select the location the train will depart by selecting the
location in the menu box located at the left bottom side of the panel.
Press "Add Location". Now build your route by selecting the next
location the train will visit, select all locations that the train will
pass through even if the train will not work the location. This way your
train's engineer will know when reading his manifest the towns he will
be traveling through. Each time you add a location to the route, the
table shows the order in which the train will visit. You can move a
location up or down in the sequence if needed.

<H3>Route Moves, Train Length, X and Y</H3>

Each location has the number of desired car moves, along with the
maximum train length that can depart that location. The X and Y are the
coordinates on your dispatcher's panel for the optional train icon. You
can set the coordinates here, or use the "SetX&Y" train icon popup menu
to teach the program where you want the train icon placed when the train
is at the specified location. Leave the X and Y coordinates at zero if
you want to manually move the icon or you're not using the icon feature.
After setting the number of moves, maximum length, or coordinates, click
on the table to make sure it is recognized by the program, then hit
"Save Route." 

<A NAME="Trains"></A>
<H2>Trains</H2>

Now that we've created our routes we need trains to move cars! Create a
train by selecting "Tools->Operations->Trains" from the top level menu.
Press the "Add" button to create a train. Enter the train's name and
optional description, and then press the "Add Train" button. Both will
show up on the train's manifest. The train's name will also show up on
the train icon, so short names work best. Then select the route that
this train will travel. There's an Edit button to the right of the route
that allows you to directly edit the selected route. Once a route is
selected a list of locations that the train will visit should appear.
You can deselect any location that you don't want the train to work.

<H3>Train Car Types</H3>

You can determine what type of cars the train will service. Select the
types of cars the train will carry by clicking on the appropriate check
boxes. A checked box means the train will service this type of car.

<H3>Train Road Names</H3>

You can control the car road names that the train will service. If the
train will service any road name, select the "Accept All" radio button.
If you want to accept only some road names, select "Accept only" radio
button. Then use the menu of road names and "Add Road" button to make a
list of road names that the train will service. To remove a road name
from your list, select the road name from the menu and use the "Delete
Road" button. <BR>
To build a list of road names that the train will not service, select
the "Exclude" radio button. Use the menu of road names and the "Add
Road" button to build a list of roads that this train will not service.

<A NAME="TrainRequires"></A>
<H3>Train Requires</H3>

You can control the number of engines that will be assigned to this
train, and optionally, the engine's model and road name. If you want two
or more engines assigned to a train, the engines must be part of a
consist.

<P>You can also require a caboose or car with FRED as the last car
in the train, and you can optionally specify the road name for the
caboose or car with FRED.</P>
<H3>Reset Train</H3>

The "Reset Train" button allows you to remove engines and cars that have
been assigned to a train. Useful when you want to try various build
option and don't what to physically move engines and cars on the
railroad. To save your train, use the "Save Train" button.

<H2>Building Trains</H2>

To build one train, press the "Build" button in the row for the desired
train in the "Trains" panel. The button will become "Print" after the
train is built. If you want to review how the train was built, select
the "Show Build Reports" before pressing the "Print" button for the
desired train. If the "Preview Manifest" checkbox is selected, the
program will generate the build report and manifest and present them in
preview frames. If you want to build several trains without having to
press individual buttons for each train, select the trains that you want
builds and press the "Build Selected Trains" button. Only the manifest
for each train will be generated. 

<A NAME="SwitchList"></A>
<H3>Switch Lists</H3>

Press the "Print Switch List" button if you want a switch list for a
given location. A menu will appear that allows you to select which
locations to preview or print. Once you've determined which locations
you want to print or preview, press the "Save" button to keep your
selections.

<H3>Moving Trains</H3>

After providing your operators with a printed manifest or location
switch list, you must keep the program database synchronized with the
actual movement of trains on your layout. This is done by the "Move"
button located on the far right of the train menu. Pressing the "Move"
button will cause the train to depart its current location move to the
next location in the route. The engines and cars assigned to the train
will travel to the next location on the railroad. At each location, cars
can be picked up or dropped off. You can also move a train by selecting
the train's icon and selecting "Move" from the icon's popup menu. Each
press of the "Move" button moves the train closer to its terminal
location. When the train arrives at the last location in the route, the
last press of the "Move" button will terminate the train. Once a train
is terminated, you can build it again.

<P>Each time an engine or car is moved a count associated with them
is incremented. The program uses this to determine which cars haven't
moved recently and tries to select cars with the least number of moves
when building new trains. Each time a location has a car picked up or
dropped, the program increments a count associated with that location.
The program tries to move cars to locations that have experienced the
least number of car operations.</P>

<P>The end of operations help.</P>

</A>
</BODY>
</HTML>

