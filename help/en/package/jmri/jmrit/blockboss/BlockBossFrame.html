<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en"><head><!-- $Id: BlockBossFrame.html,v 1.2 2007-04-08 04:49:14 jacobsen Exp $ --><title>JMRI: SSL Documentation</title>



 
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <meta content="Dick Bronson" name="Author">
    <meta name="keywords" content="java model railroad JMRI SSL"><!-- Style -->


  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <link rel="stylesheet" type="text/css" href="/css/default.css" media="screen">
  <link rel="stylesheet" type="text/css" href="/css/print.css" media="print">
  <link rel="icon" href="file:///images/jmri.ico" type="image/png">
  <link rel="home" title="Home" href="file:///"><!-- /Style --></head><body>
<div id="container">
  <p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<!-- Header -->
    <div id="header">
	<!-- Logo -->
	<a href="file:///" title="Return to home page" accesskey="1">
	    <img src="/images/logo-jmri.gif" alt="JMRI Logo" height="135" width="160"> </a>
	<!-- /Logo -->
	<ul id="mainNav"> <!-- Top tool bar -->
	   <li><a href="file:///download/" title="Get the latest software">Download</a></li>
	   <li><a href="file:///apps/" title="Learn about JMRI applications">Applications</a></li>
	   <li><a href="file:///hardware/" title="What hardware does JMRI support">Hardware</a></li>
	   <li><a href="file:///doc/Manual/" title="Trouble-shooting, and FAQs">Manual</a></li>
	   <li><a href="file:///doc/Technical/" title="Developing and extending JMRI">Developers</a></li>
	   <li><a href="file:///community/" title="Who is JMRI">Acknowledgments</a></li>
	</ul>

	<div id="searchform"> <!--  Search Form -->
	  <form id="search" method="get" action="http://www.google.com/custom">
	     <label for="q" title="Search JMRI.SourceForge.net">search JMRI: </label>
	     <input name="cof" value="LW:200;LH:95;L:http://JMRI.sourceforge.net/images/logo.gif;GIMP:#cc0000;T:black;ALC:#0000ff;GFNT:grey;LC:#990000;BGC:white;AH:center;VLC:purple;GL:0;GALT:#666633;AWFID:9262c37cefe23a86;" type="hidden">
	    <input name="domains" value="JMRI.sourceforge.net" type="hidden">
	    <input name="sitesearch" value="JMRI.sourceforge.net" type="hidden">
	    <input id="q" name="q" accesskey="s" size="30" type="text">
	    <input id="submit" value="go" type="submit">
	  </form>
       </div> <!--  End #searchform -->
    </div> <!-- closes #header-->
<!-- /Header -->





  <hr class="hide">

  <div class="nomenu" id="mBody">
    <div id="mainContent">
      <h2> 
      JMRI: Signaling   Documentation
      </h2>
    
    <dd>
	<p>Modeling railroad signaling on a layout can be done many different ways, ranging from "stoplights" to complete emulation of a particular prototype's signaling logic.

JMRI provides several different things that can help with this:
<OL>
<LI>The JMRI 
<A HREF="#table">"Signal Table"</A>
tool lets you control the appearance
of individual signals on your layout.  This can be useful for
debugging, for example.
<LI>The JMRI 
<A HREF="#logic">"Simple Signal Logic"</A>
tool can provide simple versions
of block and interlocking signaling.
<LI>The JMRI 
<A HREF="#automat">Automation classes</A>
makes it easy to code your own signal
logic into the program.  This is how Nick Kulp's Cornwall Railroad 
was signalled.
<LI>JMRI scripting provides a comprehensive programming capability.
<LI>JMRI provides a 
<A HREF="#widgets">complete toolkit</A>

to make it easy to
do any kind of automation on your layout by writing a new program
of your own.
</OL>
<BR>

There's more information on each of these below.
As you move down that list, the task becomes more and more technical, 
but you have more freedom to model exactly what you want.  

<P>
In addition, there are people working on more advanced signaling
logic within the JMRI project.  Although it's too early to talk
in detail, the idea is to provide ways of driving semi-prototypical
signaling logic, including CTC dispatching and interlocking, 
without requiring the user to write any Java code.  The 
<a href="http://groups.yahoo.com/group/jmriusers/">jmriusers discussion group</A>
will have more info on this as it becomes available.

	</p>  
	</dd>

	<dl>
	<dt class="left"><a name="contents"><h3>Contents</h3></a></dt>
	<dd class="top">
	<p>The documentation below describes Signaling with JMRI, and discusses how to set 
	up the basic signal situations. The documentation is divided into sections; click below for 
	easy access to a listed section. If you prefer to try before reading much,
	read <a href="#intro">Introduction to SSL</a>, 
	then click <a href="#start">Getting Started</a>
	and follow those instructions. Return here to read about what you did.
	</p><ul>
	<li><a href="#terms">Basic Vocabulary</a></li>
	<li><a href="#intro">Introduction to SSL</a>
	</li><li><a href="#SSL">SSL</a>
	</li><li><a href="#start">Getting Started</a>
	</li><li><a href="#variable">Available State Variables</a>
	</li><li><a href="#action">Available Actions</a>
	</li><li><a href="#notes">Additional Notes</a>
	</li></ul>
	</dd>

	<dt class="left"><a name="terms"><h3>Vocabulary</h3></a></dt>
	<dd class="top">
<p><b>Some basic signal terms:</b><br>
<ul>
<li><b>Signal Arm</b> or <b>Signal Head</b> Each individual signal unit.</li>
<li><b>Aspect</b> The speed or route indication given by one or more signal heads or arms.<br>
</li>
<li><b>Marker</b> A signal head or arm that does not change color or position.</li>
<li>
<b>Light</b> The individual lamp in a signal. A light may indicate multiple aspects
if it changes color like  in a searchlight signal, or it may take multiple lights
to indicate a single aspect, for example in position light signals.</li>
<li>
<b>Mast</b> The pole that mounts one or more signal arms that (usually) control each
individual track.</li>
<li><b>Distant Signal</b> The signal you are controlling shows the same or 
more restrictive aspect as the next signal in the direction and route of travel.</li></ul>
	
<p><b>Some JMRI specific SSL and Signal terms:</b><br>
<ul><li><b>Signal Table</b> The list of signals in JMRI. Signals must first be added into 
the Signal Table before they may be included in a SSL entry or Logix.</li>
<li><b>Triple Turnout</b> A signal head that has each aspect of the signal directly driven 
from an individual output (called a turnout) line. Each aspect change requires that three turnout commands be sent.</li>
<li>
<b>Double Turnout</b> A signal head that uses just two output lines to indicate 4 signal aspects.
Usually these aspects will be Clear, Approach, Stop, and Dark. The output coding is such that 
one turnout thrown (on) controls the stop and the other thrown (on) controls the clear. 
Both outputs thrown (on) controls the
approach, and both closed (off) are dark. Each aspect change requires that two turnout commands be sent.</li>
<li>
<b>SE8c</b> A signal head controlled by a single turnout command per aspect change. One turnout command changes between 
stop and clear, and the second turnout command changes between approach and dark.</li>
<li> <b>Virtual</b> Virtual signals are JMRI internal signals with no actual hardware attached. Before the advent of Logix,
Virtual Signals were required to solve more complex operations than can be done with with a single SSL alone.</li>
<li><b>Protected Sensor</b> The next block sensor/s following the signal you are controlling in the 
direction and route of travel. The "protection" is to prevent a train from entering an occupied block without warning.</li>
<li><b>Protected Signal</b> The next signal after the one you are controlling in the 
direction and route of travel. The "protection" is to prevent a train from approaching a stop signal without sufficient warning to allow it to be stopped short of reaching the "protected" signal.</li>
</li>
<li><b>System Name</b> The internal JMRI representation for the actual hardware being used
to control the signal. This will vary depending on your hardware, and must match your system.
</ul>
	<dt class="left"><a name="table"><h3>Signal Table</h3></a></dt>
	<dd class="top">

<A href="./images/SigTable.gif"><IMG SRC="./images/SigTable.gif" ALIGN=RIGHT WIDTH="296" HEIGHT="355" HSPACE="0" VSPACE="0"></A>
All the signals that JMRI knows about can be referenced
using the "Signal Table" tool in the Tools menu of most JMRI programs.
There are five columns in the table:
<UL>
<LI>The <b>system name</b> is assigned to the signal when it's created, 
and can't be changed.
<LI>If you're interested in having your signals carry "human readable"
names, you can click in the <b>User Name</b> column and change that information
to whatever you want.
<LI>As the signal changes, for whatever reason, the current
appearance will show in the <b>State</b> column of the table.  You can also click on the
appearance button to cycle through the avilable appearances:
red, yellow, green, flashing red, flashing yellow, flashing green, and dark. The 
system hardware will follow these changes.

<LI>The check box in the <b>Lit</b> column lets you see whether the
signal head on the layout is lit (checked) or stays dark (unchecked). This may 
also be controlled automatically with the SSL "approach" lighting option or 
from Logix. <i>Note:</i> This only affects the actual layout hardware, not any 
panel indications nor signal state logic.
 <LI>The check box in the <b>Held</b> column shows the "held" property of the
signal, and allows you to change it.  This property may be used by CTC
machine logic or Logix to say "Don't change this signal head from red, even if it 
would be safe to do so, because I want to hold a train here".
</UL>
<A href="./images/SigAdd.gif"><IMG SRC="./images/SigAdd.gif" ALIGN=RIGHT WIDTH="181" HEIGHT="218" HSPACE="0" VSPACE="0" ALT="Simple Signal Logic panel figure"></a>
<P>To define a new signal, click on the <b>Add New Signal</b> button.  It will
prompt you for the signal type (controlled by turnout outputs; SE8c; etc), and
whatever setup information is needed for your choice.
<P> This information is saved with the configuration in an XML file, along
with control panel setup, Logix, Routes, and similar stuff.  For more information
on creating and displaying panels, including how to show signals
on your panels, please see the 
<A HREF="../PanelPro/Panels.html">Panels pages</a>
and the pages on the 
<A HREF="../PanelPro/Panels-Cornwall/Cornwall.html">Cornwall Railroad control panel</a>.	<dt class="left"><a name="intro"><h3>Introduction to SSL</h3></a></dt>
	<dd class="top">
<p>
SSL is a JMRI tool to enable the rapid setup of basic ABS style signaling. 
	For more complex operations beyond the capability of SSL refer to the section on Logix.
	The SSL user interface is designed to be user friendly to
	all users with basic familiarity with JMRI. SSL provides a means
	for setting up basic signals in an intuitive manner, without the 
	user having to be familiar with all of the logic necessary to account for the different aspects.
	

    <dt class="left"><a name="SSL"><h3>SSL</h3></a></dt>                                                                                          
	<dd class="top">
	<A id="logic"><h3>Simple Signal Logic</h3></a>
<A href="./images/SigAdd.gif"><IMG SRC="./images/SSLLogic.gif" ALIGN=RIGHT WIDTH="354" HEIGHT="364" HSPACE="0" VSPACE="0" ALT="Simple Signal Logic panel figure"></a>

Much of basic ABS signaling can be boiled down to "a signal goes red when a train
can't safely enter the block it protects; it goes yellow when the block following 
the protected block can't be entered". Although that's a simplication, it can serve
as a powerful starting point for understanding signaling logic.
<P>

The Simple Signal Logic tool allows you to configure JMRI to 
use this basic ABS type of logic to set the appearance of a signal. 
Using the panel, you enter information on:
<UL>
<li><b>Signal Named</b> The signal being driven.</li><li><b>Protects Sensor/s</b> Which sensors (occupancy detectors) cover the block
immediately past the signal. When any of these sensors show "active" the 
signal will be set to red.</li>
<li><b>Red When Turnout</b> If the block contains a turnout, 
configure the turnout name and use the selection button to choose whether you're entering
the closed or thrown leg. The signal will be set to red
whenever the turnout is set against this track.</li>
<li><b>Protects Signal</b> The next signal that the train will reach;
this signal will be set yellow if the next signal is
red.</li>  
<li><b>With Flashing Yellow</b> If the checkbox is checked, the signal will be set
flashing yellow (JMRI will alternate between dark and yellow) if the
next protected signal is yellow, thereby giving four-block signaling.</li>
<li><b>Limited Speed</b> If the checkbox is checked, this signal will be set
to yellow as the least restrictive aspect.</li>
<li><b>Is Distant Signal</b> If the checkbox is checked, this signal will be set
to the most restrictive aspect of this signal or the next protected signal.</li>
<li><b>Approach Lighting Sensor</b> The sensor that controls the lighting of this signal. Only the
actual hardware signal will go dark. Panel indicators will show the normal signal aspect. 
Leave this entry blank to always show lit.</li>
<li><b>Facing Point Turnout</b> The signal located on the single track line, 
facing a choice of two or more tracks in the direction of travel.</li>
<li><b>Trailing Point Turnout</b> The signals located on the double track line, 
facing a single track in the direction of travel.</li></ul><p>

The case of a facing point turnout which leads to two different "Protected Signals" is also covered although the above figure doesn't show it.

If a single signal head is used to control both branches, then choose "On Facing-Point
Turnout". If a different head will control each route, then simply choose "Main"
or "Diverging" leg of turnout, as required for each one.
<p>Pause your mouse over any entry or item in the SSL creation window for a brief "tooltip" help 
reminder.</p>

<p>It's clear that this won't cover complicated interlockings nor will it 
cover the speed-signaling seen on some prototypes. For those situations use a 
combination of Logix and Routes. Logix cover the conditions, and Routes control the actions
to be taken.</p>
	</dd>
	
	<dt class="left"><a name="start"><h3>Getting Started</h3></a>
	</dt>
	<dd class="top">
	    <p>Follow the following steps to create a signal and become familiar
	    with how the SSL user interface works.
	    </p><ol>
		<li> Select <b>Turnout Table</b> in the <b>Tools</b> menu.
		</li><li> Check to be sure that the output lines (turnouts) that will control your signal are in the table. If not, click the <b>Add</b> button at the bottom of the Turnout Table.
		</li><li> In the Add New Turnout window that appears, enter a system name, (E.g. LT1)
		and "test" for user name, then click <b>OK</b>. <i>Note:</i> System names must start 
		with CT, IT, LT, NT, XT, etc. and be followed by the actual hardware number of the turnout.
		</li> <li> Clicking on the correct <b>Closed/Thrown</b> entries in the Turnout Table should now cause your signal to change.
		</li><li> Next select <b>Signal Table</b> in the <b>Tools</b> menu.
		</li><li> In the Signal Table window that appears, click <b>Add</b> to begin defining a new signal head.
		</li><li> In the Add New Signal window that appears choose the correct signal type to 
		match your hardware. The required item boxes will appear.
		</li><li> Enter a system name. For example LH152. <i>Note:</i> System names must start 
		with CH, IH, LH, NH, XH, etc. and be followed by the number of this head.
		</li><li> Next enter one or more turnout numbers that will control this signal. <i>Note:</i> In the case of
		SE8c style signals just enter the first turnout number of each pair. The second is automatically known. 
		</li><li> Click <b>OK</b> to enter this head into the Signal Table.  
		</li><li> Enter all the signal heads that you will be using for this test.
		<li> Now select <b>Simple Signal Logic</b> in the <b>Tools</b> menu.
		</li>
		<li> Fill in the various entries to match your signals requirements as 
		previously shown in the <a href="#SSL">SSL</a> section.
		</li><li> Click <b>Apply</b> to make this entry active.</li>
		<li> Be sure to save your work.
		</ol>
    	<p>You have just created an SSL entry to control a signal head. It's as 
		simple as that. It took 
    	you more time to read this tutorial than to create the SSL entry.</p>	    
	</dd>

	<dt class="left"><a name="variable"><h3>Available Signal State Variables in Logix</h3></a></dt>
	<dd>
	<p>State variables related to signals that are currently available for use in Logix Conditionals
	are listed below, along with information on each. State variables
	must always evaluate to either true or false. The condition resulting in 
	true is given for each. If the condition is not met, the state variable
	evaluates to false. When a Logix is active, the states of entities (sensor,
	turnout, signal red, etc.) specified in state variables in its Conditionals are 
	monitored. A calculation of all Conditionals in the Logix is triggered
	when any monitored state changes as noted below (if not obvious). <i>Note:</i> 
	Not all possible Logix conditionals are listed here.
	    </p><ul>
		<li><b>Sensor Active</b>: Evaluates to true if the state of the
		specified sensor is active. 
		</li><li><b>Sensor Inactive</b>: Evaluates to true if the state of the
		specified sensor is inactive. 
		</li><li><b>Turnout Thrown</b>: Evaluates to true if the known state of the
		specified turnout is thrown. 
		</li><li><b>Turnout Closed</b>: Evaluates to true if the known state of the
		specified turnout is closed.
		</li><li><b>Conditional True</b>: Evaluates to true if the state of the
		specified conditional is true. Note that because Conditional user
		names may be duplicated across different Logixs, a system name must be 
		used to specify a conditional belonging to a different Logix.
		</li><li><b>Conditional False</b>: Evaluates to true if the state of the
		specified conditional is false. Note that because Conditional user
		names may be duplicated across different Logixs, a system name must be 
		used to specify a conditional belonging to a different Logix.
		</li><li><b>Signal Red</b>: Evaluates to true if the appearance of the 
		specified signal head is red. Calculation is 
		triggered when the appearance change to or from red.
		</li><li><b>Signal Yellow</b>: Evaluates to true if the appearance of the 
		specified signal head is yellow. Calculation is 
		triggered when the appearance change to or from yellow.
		</li><li><b>Signal Green</b>: Evaluates to true if the appearance of the 
		specified signal head is green. Calculation is 
		triggered when the appearance change to or from green.
		</li><li><b>Signal Dark</b>: Evaluates to true if the appearance of the 
		specified signal head is dark. Calculation is 
		triggered when the appearance change to or from dark.
		</li><li><b>Signal Flashing Red</b>: Evaluates to true if the appearance of 
		the specified signal head is flashing red. Calculation 
		is triggered when the appearance change to or from flashing red.
		</li><li><b>Signal Flashing Yellow</b>: Evaluates to true if the appearance of 
		the specified signal head is flashing yellow. Calculation 
		is triggered when the appearance change to or from flashing yellow.
		</li><li><b>Signal Flashing Green</b>: Evaluates to true if the appearance of 
		the specified signal head is flashing green. Calculation 
		is triggered when the appearance change to or from flashing green.
		</li><li><b>Signal Lit</b>: Evaluates to true if the specified signal head is 
		lit. 
		</li><li><b>Signal Held</b>: Evaluates to true if the specified signal head 
		is being held. 
    	</li></ul>
	</dd>    
    
	<dt class="left"><a name="action"><h3>Available Signal Actions in Logix</h3></a></dt>
	<dd>
	<p>Actions related to signals that are currently available for use in Logix Conditionals are listed 
	below along with information on each. <i>Note:</i> 
	Not all possible Logix actions are included here.
	    </p><ul>
		<li><b>Set Turnout</b>: Sets the specified turnout to the chosen 
		state.  Specify the turnout to set by entering its system name or user
		name.  Specify the state to set by choosing Closed or Thrown in the 
		popup menu.		
		</li><li><b>Set Signal Appearance</b>: Sets the specified signal head  to 
		the chosen appearance. Specify the signal head to set by entering its 
		system name or user name.  Specify the appearance to set by choosing 
		from the popup menu.		
 		</li><li><b>Set Signal Held</b>: Sets the specified signal head to hold.
		Specify the signal head to hold by entering its system name or user name.  
  		</li><li><b>Clear Signal Held</b>: Clears the hold on the specified signal 
  		head. Specify the signal head by entering its system name or user name.  
  		</li><li><b>Set Signal Dark</b>: Sets the specified signal head to not lit.
		Specify the signal head by entering its system name or user name.  
  		</li><li><b>Set Signal Lit</b>: Sets the specified signal head to lit.
		Specify the signal head by entering its system name or user name.  
  		</li><li><b>Trigger Route</b>: Triggers the specified route.
		Specify the route by entering its system name or user name.  
		</li><li><b>Set Sensor</b>: Sets the specified sensor to the chosen 
		state.  Specify the sensor to set by entering its system name or user
		name.  Specify the state to set by choosing Active or Inactive in the 
		popup menu.		
		</li><li><b>Delayed Set Sensor</b>: Sets the specified sensor to the chosen 
		state after waiting for a specified number of seconds.  Specify the 
		sensor to set by entering its system name or user name. Specify the 
		state to set by choosing Active or Inactive in the popup menu. Specify 
		the number of seconds to delay before setting the sensor by entering a 
		number in the right-most field.
		</li><li><b>Play Sound File</b>: Plays the specified sound file. (for 
		example CTC relay clicks) Specify the 
  		sound file to play by entering its name in the field provided. Click 
  		<b>Set</b> to bring up a file selection dialog to aid in finding the
		file. Navigate to your sound file, then click your sound file's name 
		in the dialog to copy it (including its path) to the field.
  		</li><li><b>Run Script</b>: Starts the specified script.
		Specify the script to start by entering its name in the field provided.
		Click <b>Set</b> to bring up a file selection dialog for finding the
		file. Navigate to your script file, then click your script file's name 
		in the dialog to copy it (including its path) to the field.
		</li></ul>
	</dd>    
	<dt class="left"><a name="notes"><h3>Additional Notes:</h3></a></dt>
	<dd>
	</p>
    


      <hr class="hide">
<!-- Footer -->
    <hr class="hide">
    <div id="footer">
	<ul id="bn">
	<li><a href="file:///sitemap/">Site Map</a></li>
	<li><a href="file:///contact/">Contact Us</a></li>
	</ul>

	<p>Thanks and congratulations to
	   <a href="file:///community/" title="Who is JMRI">
	   	all who contributed</a>! </p>

	<p>Copyright © 1997 - 2007 JMRI Community. 
	</p><p>JMRI, DecoderPro, PanelPro, DispatcherPro and associated logos are our trademarks.
	</p><p><a href="file:///Copyright.html">Additional information on copyright, trademarks and 
	licenses is linked here.</a></p>
    
       <br>Site hosted by: <br>
        <a href="http://sourceforge.net/"> 
        <img src="Logix_files/sflogo.png" alt="SourceForge Logo" border="0" height="31" width="88"> </a> 


    </div>
<!-- /Footer -->
   </li></ul></dd></dl></div><!-- closes #mainContent-->
  </div> <!-- closes #mBody-->
</div> <!-- closes #container -->
</body></html>