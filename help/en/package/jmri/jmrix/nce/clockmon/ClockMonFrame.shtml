<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<!-- $Id$ -->

<html lang="en">
<head>
  <meta name="generator" content=
  "HTML Tidy for Mac OS X (vers 31 October 2006 - Apple Inc. build 15.17), see www.w3.org">

  <title>JMRI: NCE Clock Monitor</title>
  <meta http-equiv="Content-Type" content=
  "text/html; charset=us-ascii">
  <meta name="author" content="Bob Jacobsen">
  <meta name="keywords" content="JMRI help Route Add Edit">
  <!-- Style -->
  <meta http-equiv="Content-Type" content=
  "text/html; charset=us-ascii">
  <link rel="stylesheet" type="text/css" href="/css/default.css"
  media="screen">
  <link rel="stylesheet" type="text/css" href="/css/print.css"
  media="print">
  <link rel="icon" href="/images/jmri.ico" type="image/png">
  <link rel="home" title="Home" href="/"><!-- /Style -->
</head>

<body>
  <!--#include virtual="/Header" -->

  <div class="nomenu" id="mBody">
    <div id="mainContent">
      <h1>NCE Clock Monitor</h1>

      <p>When running in the NCE as clock master mode, the internal
      clock rate is adjusted to match time with the NCE command
      station clock. The goal is the minute should roll over at the
      same time for the internal clock and ProCab displays should
      change the same as clocks on PanelPro etc....</p>

      <p>When running with the internal clock as master, the NCE
      clock is adjusted, forward or backwards, some number of
      seconds just before the minute rolls over. So NCE time does
      jump slightly as time is adjusted but the goal is the minutes
      tick off at the same time as the internal clock.</p>

      <p>This service depends on being able to do memory read and
      write commands to the command station. This is currently
      supported by the serial connection on the command stations
      only. Those devices that rely on the NCE-USB adapter, like
      the PowerCab or SB3, are not currently supported due to lack
      of command station memory access.</p>

      <h2>Clock Status Lines</h2>

      <p>These lines display current status of each clock and
      settings. When running in sync mode, the line that is the
      master will be so marked. Also the current error between the
      NCE and internal clock will be displayed.</p>

      <h2>Clock Settings</h2>

      <p>These are the same as making changes from the ProCab
      throttle. If the sync mode is 'Internal Master' these are
      disabled and you have to make your changes via the internal
      clock control panel.</p>

      <p>Changing clock settings while in sync mode will cause the
      sync mode to reset and perform initialization for that sync
      mode.</p>

      <h2>Polling Speed</h2>

      <p>This sets how often a clock read is made just for the
      purpose of updating the clock monitor display. Setting this
      low will increase the serial traffic to the command station.
      But setting this high will also cause the clock status
      display to lag considerable and the indicated 'error' will
      tend to look worse but that is cosmetic only.</p>

      <h2>PID Constants</h2>

      <p>These values should generally be left alone. They adjust
      how the calculations are handled to keep the NCE and internal
      clock in sync. It was a very loose 'PID' type calculation.
      Generally the clock sync will improve as it is allowed to
      run. The first few minutes may hunt around while finding the
      best adjustments.</p>

      <h3>P Factor</h3>

      <p>This adjusts how much the current error is used to adjust
      the clocks.</p>

      <h3>I Factor</h3>

      <p>This adjusts how much the difference between the current
      error and prior error is used in the clock adjustments.</p>

      <h3>D Factor</h3>

      <p>This adjusts how much the rate of change between the
      current error and the prior error is used in adjusting the
      clock.</p><!--#include virtual="/Footer" -->
    </div>
  </div>
</body>
</html>
