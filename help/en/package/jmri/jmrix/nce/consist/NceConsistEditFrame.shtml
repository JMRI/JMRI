<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<!-- $Id$ -->
<HTML LANG="en">
<HEAD>
<TITLE>JMRI: Edit NCE Consist</TITLE>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META CONTENT="Dan Boudreau" NAME="Author">
<META NAME="keywords" CONTENT="JMRI Help NCE Edit Consist ">

<!-- Style -->
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<LINK REL="stylesheet" TYPE="text/css" HREF="/css/default.css"
	MEDIA="screen">
<LINK REL="stylesheet" TYPE="text/css" HREF="/css/print.css"
	MEDIA="print">
<LINK REL="icon" HREF="/images/jmri.ico" TYPE="image/png">
<LINK REL="home" TITLE="Home" HREF="/">
<!-- /Style -->
</HEAD>

<BODY>
<!--#include virtual="/Header" -->  
  <div class="nomenu" id="mBody">
    <div id="mainContent">

<H1>Edit NCE Consist</H1>
This tool allows you to review, edit, and save NCE style consists. It
also allows you to backup and restore all the NCE command station
consists to and from a file. The file format is identical to NCE, so you
can restore a file that was generated by the NCE backup command. Very
useful since the restore and backup commands in the 2007 EPROM don't
currently work! We recommend that you set the baud rate at 9600 when
using this tool.

<p>
There is also a separate JMRI
<a href="../../../../../html/tools/consisttool/ConsistTool.shtml">generic consist tool</a>,
whose
<a href="../../../../../html/tools/consisttool/ConsistTool.shtml">help page</a>
also has a small tutorial on the various forms of consisting.

<H2>Backup</H2>

To backup all of your consists to a file, press the "Backup" button
located on the bottom row of the JMRI consist editor. A default file
name will appear in the Save window, you can change the name it to
whatever you wish. Press the "Save" button and the JMRI consist editor
will read the NCE command station memory and store the contents into the
file you selected.

<H2>Restore</H2>

To restore all of your consists from a file, press the "Restore" button
located on the bottom row of the JMRI consist editor. Select a file by
typing the name, or clicking on it. Press the "Open" button and the JMRI
consist editor will write the NCE command station memory with the
contents of the file you selected. The JMRI consist editor will check
the contents of the file before writing the command station memory to
verify that the file is indeed a NCE consist backup file! Note that the
"Restore" only updates the NCE command station memory. It doesn't
program the locos on your layout.

<H2>Get</H2>

To review a consist, enter the number of the consist in the text box
under the heading "Consist" and press the "Get" button. This will
retrieve the consist from the command station's memory.


<H2>Add Loco</H2>

To add a loco to a consist, enter the loco's address and then press the
"??" button until the desired direction "Forward" or "Reverse" appears.
If you want the use the short address format press the "Long" button and
"Short" should appear. To program the loco with the consist address and
update the NCE command station, press the "Add" button and the loco will
be added to the consist.

<H2>Add Loco from Roster</H2>

To add a loco from your locomotive roster, select the desired loco and
the program will automatically fill in the loco address and address
format. Select the loco direction and press "Add" to complete the
operation.

<H2>Replace</H2>

To replace the lead or rear loco, press the "Replace" button. This will
delete the selected loco from the consist. Enter the address of the new
loco along with its direction and press "Add" to program this loco with
the consist address. If you want a mid loco to now be a lead or rear
loco, just enter the mid loco's address and then press "Add".

<H2>Delete</H2>

To delete an loco from the consist, press the "Delete" button across
from the loco address you wish to remove.

<H2>Clear</H2>

To remove all locos from a consist, press the "Clear" button located on
the bottom row.


<H2>Previous and Next</H2>
The "Previous" and "Next" buttons allow you to search for consists. If
you're looking for an empty consist, click the "Empty Consist" box
located in the upper right hand corner.

<H2>Verify Loco Checkbox</H2>

When checked, the program will verify that the loco that you are adding
isn't assigned as a lead or rear loco in another consist. It takes
several seconds for the program to verify that the add loco is
available. An error message will appear if the program determines that
the add loco address is already in use.
<P>However, if the add loco was previously assigned as mid loco loco
in another consist, the program will delete the loco from the other
consist and add it to the new one without any warnings.</P>

<H2>Consist Roster Checkbox</H2>

When checked, the program will create and manage a roster of consists. A
consist must have a lead and rear loco before the program will create an
entry for you to manage. Two additional buttons will appear when the
"Consist roster" checkbox is selected, "Save" and "Delete", and the
"Consist" pull down menu becomes enabled. If you already have a NCE
consist that you want to add to the consist roster, simply press the
"Clear" button when the "Consist roster" checkbox is selected and the
program will ask you if you want to add the NCE consist to your roster.
If you pressed "yes", the "Consist" menu should then have a new entry
which is the address of the lead loco of your consist. To load your
consist back into NCE memory and reprogram your locos, simply select the
consist from the "Consist" menu and press "Load". If you don't want to
load the consist, press "Cancel".

<P>There isn't a limit to the number of consist that the consist
roster can manage. This means those of you that are lucky enough to have
more than 127 consists can use the NCE Consist editor to manage an
"unlimited" number of consists.</P>

<P>When managing a large number of consist, it might be useful to
identify your consists by assigning the lowest number of your end locos
as the lead loco. This way you can quickly select a consist by using the
lowest number of your two end locos.</P>

<H2>Save and Load button</H2>

The label for this button can be "Save" or "Load". If the program
detects that a consist has been created or changed the "Save" button
will become enabled. The program will enable the "Save" button when
there's at least a lead and rear loco and the direction for each has
been selected.

<P>When you select a consist to load from the "Consist" menu, the
"Save" button becomes "Load". You must specify the loco's direction to
enable the "Load" button. You can also modify the consist before loading
it and the program will ask if you want to save the changes. When
loading a consist the program will search for the first empty consist
number in the NCE command station starting at consist number 127. If you
select a consist from the "Consist" menu that is already in the NCE
command station, the program will pop up a message stating that the
consist has already been loaded. You can press "Load" to reprogram your
locos if you wish, otherwise press the "Cancel" button.</P>

<H2>Delete button</H2>

To remove a consist from your roster, press the "Delete" button located
on the bottom row. The "Delete button only becomes active after you've
selected a consist from the "Consist" menu.

<H2>Status:</H2>

There are many states that the NCE consist editor can be in and the
"Status:" field provides an indication of what is happening and whether
the operation was successful. Listed below is a brief description of the
various "Status:" states.
<DL>
	<DT>okay</DT>
	<DD>Operation completed successfully.</DD>
	<DT>error</DT>
	<DD>Operation failed. A popup error message should also appear.</DD>
	<DT>waiting</DT>
	<DD>The editor is waiting for the NCE command station to respond.
	The NCE command station should respond within a couple of seconds,
	otherwise there's a problem with the connection or command station.</DD>
	<DT>searching</DT>
	<DD>The editor is reading the NCE command station for the desired
	information. Normally the state after pressing "Previous" or "Next".
	Also when loading a consist from the roster the editor will search the
	NCE command station memory for an empty consist number to assign to the
	consist. Searches should complete in a few seconds, otherwise there's
	a problem with the connection or command station.</DD>
	<DT>none</DT>
	<DD>The editor wasn't able to find a consist or an empty consist.
	</DD>
	<DT>verifying</DT>
	<DD>The editor is reading the NCE command station memory to see if
	a loco has already been assigned as a lead or rear loco in a consist.
	If a loco is already assigned, a popup message will appear and "Status:"
	will show "error".</DD>
	<DT>unknown</DT>
	<DD>The initial state of the NCE consist editor. Also when the
	"Consist roster" checkbox is selected means that the consist in the NCE
	command station wasn't created by the editor. Therefore the editor
	doesn't know the direction of the locos in the consists.</DD>
	<DT>Modified!</DT>
	<DD>The editor knows about the consist, but the consist has been
	modified. If a loco has been added, the direction of the loco isn't
	known. And if a loco has been deleted from the consist, the editor
	wants you to know!</DD>
</DL>

<!--#include virtual="/Footer" -->
	</div>
  </div>
</BODY>
</HTML>

