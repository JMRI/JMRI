<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="Bob Jacobsen, LBL">
   <meta name="GENERATOR" content="Mozilla/4.75C-CCK-MCD {C-UDP; EBM-APPLE} (Macintosh; U; PPC) [Netscape]">
   <meta name="Content-Type" content="text/html; charset=iso-8859-1">
   <title>DecoderPro README</title>
</head>
<body>

<P>
This is the README file for version 0.9b6 of "DecoderPro".  

<P><B>Note that
there have been some changes in the Windows packaging since the
earlier version; if you're using DecoderPro on Windows you should
read the Windows sections again.</B>

<P>
DecoderPro provides a simple yet powerful tool for programming
DCC decoders and managing a locomotive roster.
It works with Digitrax LocoNet and NCE-equipped layouts. It provides
tools for layout control and monitoring, and for programming decoders.
<P>
<B>This is an early release. It is not yet ready for 
serious use. It is being provided so that people can 
get an early look and make comments.</B>

<P>
For more information, visit the 
JMRI web page at 
<A HREF="http://jmri.sourceforge.net/">http://jmri.sourceforge.net/</a>
or contact Bob Jacobsen 
(<A HREF="mailto:jake@physics.berkeley.edu">jake@physics.berkeley.edu</a>). 
DecoderPro is based on the JMRI libraries, which are
described at 
<A HREF="http://jmri.sourceforge.net/">http://jmri.sourceforge.net/</a>.

<P>
Note that there are three distributions for DecoderPro.
The basic Java code is the same, only the form of the
distribution varies. 
More information on the details of the various packages is 
available at 
<a href="http://jmri.sourceforge.net/Technical/Packaging.html">http://jmri.sourceforge.net/Technical/Packaging.html</a>.
For more installation information, please 
see 
<A HREF="http://jmri.sourceforge.net/InstallJmri.html">http://jmri.sourceforge.net/InstallJmri.html</a>
<P>
The specific download files are:
<DL>
<DT>Macintosh, in HQX format<DD>
<A HREF="http://prdownloads.sourceforge.net/jmri/DecoderPro.0.9b6.hqx">http://prdownloads.sourceforge.net/jmri/DecoderPro.0.9b6.hqx</A>

<DT>Windows and OS/2 in .zip format<DD>
<A HREF="http://prdownloads.sourceforge.net/jmri/DecoderPro.0.9b6.zip">http://prdownloads.sourceforge.net/jmri/DecoderPro.0.9b6.zip</A>

<DT>Linux in compressed archive form (.tar.gz)<DD>
<A HREF="http://prdownloads.sourceforge.net/jmri/DecoderPro.0.9b6.tar.gz">http://prdownloads.sourceforge.net/jmri/DecoderPro.0.9b6.tar.gz</A>

</dL>

<h3>Macintosh MacOS 8 and 9 instructions:</h3>

The Macintosh version of DecoderPro can be downloaded from 
<A HREF="http://prdownloads.sourceforge.net/jmri/DecoderPro.0.9b6.hqx">http://prdownloads.sourceforge.net/jmri/DecoderPro.0.9b6.hqx</A> .
<P>
We test on a 90MHz Power Macintosh 7100 with 32MB of memory.  This is about
the minimum needed; it works, but is quite slow. Both a faster CPU and more
memory are recommended. 
A screen size of 800x600 or larger is strongly recommended.
<P>
This application should run with any recent release of the Macintosh Runtime for Java (MRJ).  
MRJ requires Mac OS 8.1 or later.  Development is currently using MRJ 2.2.5, 
available for download from Apple at
  <a href="http://developer.apple.com/java/download.html">http://developer.apple.com/java/download.html</a>.
<P>
You need to have the Java Swing and Java communications libraries installed.
An installer can be downloaded from
  <a href="http://prdownloads.sourceforge.net/jmri/JavaLibsInstaller-2.hqx">http://prdownloads.sourceforge.net/jmri/JavaLibsInstaller-2.hqx</a>.
Unfortunately, its a 4MB download.  You only have to do it once, however; 
future updates of DecoderPro will continue to use these same libraries.
Run the installer before starting DecoderPro.
<P>
Once those packages are installed, you can
start the program by double-clicking on the "DecoderPro" application icon.  


<h3>Macintosh MacOS X instructions:</h3>

The Macintosh version of DecoderPro can be downloaded from 
<A HREF="http://prdownloads.sourceforge.net/jmri/DecoderPro.0.9b6.hqx">http://prdownloads.sourceforge.net/jmri/DecoderPro.0.9b6.hqx</A> .

<P>
MacOS X version 10.1.1 or later is required.

<P>
You will need drivers for the serial hardware you're using.  We test
using a Keyspan PDA Adapter; those drivers are available at 
  <a href="http://www.keyspan.com/support/macosx">http://www.keyspan.com/support/macosx</a>

<P>  
You also need the javax.comm package.  An installer can be downloaded from
<a href="http://prdownloads.sourceforge.net/jmri/JavaCommInstaller04.hqx">http://prdownloads.sourceforge.net/jmri/JavaCommInstaller04.hqx</a>.
You will need the MacOS X administrator password to run it.

<P>  
Some device drivers will list each port under several names, e.g. starting
with "/dev/tty" or "/dev/cu", for example "/dev/tty.KeyUSA19181.1". In that case, 
you <b>must</b>
select the one that starts with "cu", e.g. "/dev/cu.KeyUSA19181.1". 

<P><b>Don't</b> select the one with no "/dev" prefix, e.g. "KeyUSA19181.1"
If you do select that one, the program will hang on startup; you have to
delete the prefs/DecoderProConfig.xml file to fix it. This appears to
be due to a bug in the Keyspan drivers.

<P>
Double-click the "DecoderPro" icon
to run the application natively under MacOS X. 
By default, it will have the nice Aqua interface.  

<P>
Note that MacOS X 10.1.1 is required for this to work. Further, MacOS X does
not yet support the LocoNet baud rate, so you must use a LocoBuffer to
access a LocoNet; a MS100 will not yet work.  We're working 
to get this fixed, but don't expect it to happen soon.
The NCE direct connection
does work fine. 

<h3>OS/2 instructions:</h3>

You need to have Java (at least 1.1.8), Swing and javacomm installed on your 
machine. These can be downloaded from the IBM site.
<P>
A screen size of 800x600 or larger is strongly recommended.
<P>
Download the 
<A HREF="http://prdownloads.sourceforge.net/jmri/DecoderPro.0.9b6.zip">http://prdownloads.sourceforge.net/jmri/DecoderPro.0.9b6.zip</A>
file and expand it with 
<pre>
   PKZIP -extr -dir DecoderPro.0.9b6.zip
</pre>
Change to the directory just created, then run the DecoderPro.CMD  
script from this directory with
<Pre>
   DecoderPro
</pre>   

<h3>Linux instructions:</h3>

You need to have Java 1.2 or later installed on your machine, including Swing. 
You can get this from Sun at
  <a href="http://java.sun.com/j2se/">http://java.sun.com/j2se/</a>.
For information on installing Java, please see 
  <a href="http://jmri.sourceforge.net/Java/InstallJava.html">http://jmri.sourceforge.net/Java/InstallJava.html</a>.
<P>
To communicate with a LocoNet, you need to have a version of the javax.comm 
package installed on your computer.  One is available at 
  <a href="http://www.interstice.com/kevinh/linuxcomm.html">http://www.interstice.com/kevinh/linuxcomm.html</a>
with additional information at
  <a href="http://www.rxtx.org/">http://www.rxtx.org/</a>.  
 <P>
Download the 
<A HREF="http://prdownloads.sourceforge.net/jmri/DecoderPro.0.9b6.tar.gz">http://prdownloads.sourceforge.net/jmri/DecoderPro.0.9b6.tar.gz</A>
file, then unpack it with
<PRE>
   gunzip DecoderPro.0.9b6.tar.gz
   tar xf DecoderPro.0.9b6.tar
</PRE>      
Switch to the demo directory and run the demo using

<Pre>
  ./DecoderPro.csh
</pre>
  
<P>
We really need better Linux instructions, esp. the part about the javax.comm
package. It would be great if you were interested in helping with this.

<h3>Windows instructions:</h3>

To run Decoder Pro under Windows, we recommend you have at least 32MB of 
memory for Windows 95 or 98, and 48MB of memory for Windows 2000 or later.
We don't know whether DecoderPro will work on Windows NT, and would appreciate
any information on this that you might have.  For the more complicated 
programmer screens, a display with a resolution of 800x600 or larger is
strongly recommended.
<P>
You need to have Java 1.3.1 or later installed on your machine, including Swing. 
We test with JRE 1.3.1-01 and recommend you 
use it or a later 1.3.1 version. You can get this from Sun at
  <a href="http://java.sun.com/j2se/1.3/jre/">http://java.sun.com/j2se/1.3/jre/</a>.
You'll need about 40MB of available disk space to download and unpack 
the Java installer. 
Java takes up about 20MB once the install is complete.
Other Java versions are available at
  <a href="http://java.sun.com/j2se/">http://java.sun.com/j2se/</a>.
Note that the 1.4 versions are for beta testers, and we're not brave
enough to have done that yet.
For information on installing Java, please see 
  <a href="http://jmri.sourceforge.net/Java/InstallJava.html">http://jmri.sourceforge.net/Java/InstallJava.html</a>
 
<P>
You will need to know where your Java installation is on your disk.  This is
called the "Java home directory" below.  The Sun installers use
<pre>
  C:\Program Files\JavaSoft\JRE\_your_version_
</pre>
for this, for example
<pre>
  C:\Program Files\JavaSoft\JRE\1.3.1
</pre>
<P>
To communicate with a LocoNet or NCE system, you need to have a version 
of the javax.comm package installed on your computer.  The one from 
  <a href="http://java.sun.com/products/javacomm/">http://java.sun.com/products/javacomm/</a>
is included with the DecoderPro distribution, but you have to copy some files
to their final locations.
<P>
Download the 
<A HREF="http://prdownloads.sourceforge.net/jmri/DecoderPro.0.9b6.win.zip">http://prdownloads.sourceforge.net/jmri/DecoderPro.0.9b6.zip</A>
file and expand it with WinZip or similar.

<P>
Copy the "win32com.dll" file just unpacked to the "bin" subdirectory of your
Java home directory, for example:
<PRE>
  copy win32com.dll C:\Program Files\JavaSoft\JRE\1.3.1\bin
</PRE>
Copy the "javax.comm.properties" file just unpacked to the "lib" subdirectory 
of your Java home directory, for example:
<PRE>
  copy javax.comm.properties C:\Program Files\JavaSoft\JRE\1.3.1\lib
</PRE>
<P>
Installation is complete.
<P>
To start the program, double click on the "DecoderPro.bat" file icon (depending
on how your machine is configured, this might also show as
"DecoderPro").  If you want to run the program with a debugging
window to see error messages, etc, double click on the
"DecodeProDebug.bat" icon.
<P>
Note: We've heard that some types of Comm ports can't handle the LocoNet baud
rate.  If you get errors messages about "Unsupported baud rate", please let
us know so we can help find a solution for this.

<h3>LocoNet Hardware Connection:</h3>

There are two hardware adapters available to connect to a LocoNet.  The
LocoBuffer is the strongly preferred alternative, as it reduces the load 
on the host computer and has a significantly smaller error rate.  The
Digitrax MS100 interface adapter is also supported (except on MacOS X). 

<P>
The LocoBuffer was created by John Jabour 
(<a href="mailto:jjabour@optonline.net">jjabour@optonline.net</a>).
More information is also available from the LocoNet_Info group, 
<a href="http://groups.yahoo.com/group/loconet_hackers">http://groups.yahoo.com/group/loconet_hackers</a>
The LocoBuffer should be configured with J1, J4 and J5 set on pins 1 and 2, 
J2 and J3 set to pins 2 and 3. This configures it for a 19200 baud
connection, so select "LocoNet LocoBuffer 19200bps" in the preferences panel.

<P>
Some computers can successfully communicate at 57600bps with a LocoBuffer.
To do this, select "LocoNet LocoBuffer 57600bps" in the preferences panel
and configure your LocoBuffer with J4 and J5 set on pins 1 and 2, 
J1, J2 and J3 set to pins 2 and 3 (J1 is the one that determines the baud rate).

<P>The LocoBuffer controller chip should
contain version 1.4.6 or later of the LocoBuffer program. Note that
version 1.4.5 has a bug that prevents it from working with LocoBuffer.

<P>
A standard Macintosh RS422 serial port will not work directly 
with an MS100. Since it doesn't have two output status lines (DTR and RTS),
it can't provide correct power to the MS100.  It may be possible to 
provide external power; if you're interested in trying this, we'd
be happy to help work out a solution. A LocoBuffer will work fine
with a standard Macintosh RS422 serial port.

<P>
In MS100 mode, the program attempts to open the port at 16600 baud, 
the LocoNet rate.  If this fails, it attempts to open the port at 16457 baud, 
which is a standard rate that's close enough to work.  If this also
fails, the program pops a dialog box to tell you that it can't
set the port to a usable baud rate.  This will always happen on MacOS X, which
is why the MS100 can't be used with MacOS X.  A large fraction, but not all,
windows machines also have this problem.  We don't know how to tell
which Windows machines will and which won't, except for trying it.  
Because we can't be sure your computer will be able to talk to a 
MS100 without trying it, you should test this before spending money
on the MS100. To do that:
<UL>
<LI>Start the program.
<LI>Set the preferences for MS100 and your serial port. You
don't need to have anything connected, but do select the port
you will eventually be using. 
<LI>Save the preferences.
<LI>Quit the program and restart it so that the preferences take effect.
</UL>If you get a dialog box saying "Could not set baud rate...", then 
you won't be able to use your computer with a MS100.  You should use 
a LocoBuffer.

<P> 
DecoderPro is tested with both a MS100 and a LocoBuffer on 
a USB Macintosh using a Keyspan PDA 
Adapter to provide the serial port; for information please see 
<a href="http://jmri.sourceforge.net/DigiTrax/KeyspanAdapters/KeyspanUSB.html">http://jmri.sourceforge.net/DigiTrax/KeyspanAdapters/KeyspanUSB.html</a>. 
 
<P>
For more information on the MS100, please see
<a href="http://www.digitrax.com/computer.htm">http://www.digitrax.com/computer.htm</a>

<h3>NCE System Hardware Connection:</H3>

DecoderPro is tested on a USB Macintosh using a Keyspan PDA Adapter to 
provide the serial port. A standard Macintosh RS422 serial port will also work.

<H3>Operating DecoderPro:</h3>

For more information, including images of the decoder in operation,
please see 
<a href="http://jmri.sourceforge.net/PaneProg/index.html">http://jmri.sourceforge.net/PaneProg/index.html</a>.

<P>
The first time you start DecoderPro, it will open a "Preferences" panel.
Select your communication method in the top box, and the port to use 
just underneath it.   The radio buttons allow you to change the appearance
of the user interface; we recommend you keep the default if it works.
Click "Save", then quit the program and restart it. If you want to
change the preferences later, pull down the edit menu and 
select "Preferences...".

<P>
Pull down the "File" menu and select "New Programmer...".  A new 
"Tab-Programmer Setup" pane
appears for selecting what you want to do next. 

<P>
Start by putting one of your decoder-equipped locomotives on the 
programming track.  Click the "Ident" button next to the "Decoder
Installed" label and decoder selection box.  The programmer will
read the decoder and attempt to identify it.   
While the 
programmer is talking to the decoder, status will be displayed in
the bottom of the window; "Idle" or "OK" means that things are working.
If it succeeds, it 
will select the decoder model in the selection box.  Usually
it will only be able to narrow the selection down.
Pull down the "Decoder installed" selection box and check that the
right model is selected.  If your decoder doesn't appear, select
something that seems close.

<P>Some people prefer a very simple programmer, and some want to 
have access to every feature. To handle this, DecoderPro
provides several displays.  As shipped, it comes with:
<DL>
<DT>Basic<DD>A simple one, with just the most popular information
<DT>Comprehensive<DD>The most complete display, with multiple panes 
of detailed information.
<DT>Registers<DD>Complete configuration for a register-only decoder
<DT>Tutorial<DD>Not useful for actually programming decoders, 
this contains examples of how various special effects can
be obtained when you're constructing your own programmer.
</DL>
You can even define your own format if you'd prefer to just see
the variables you use.  For this first pass through the program,
select "Comprehensive" in the lowest selection box.

<P>When you selected a decoder type in the earlier step,
the "Open Programmer" button should have become enabled.
Click it now to configure a new programmer.

<P>
After a few seconds, the 
main programmer window opens.  In the top field, labeled
"ID" and containing "new loco", type the name you call this 
locomotive.  This value will appear in roster lists later.
You can also put whatever information you think useful in the
other fields.

<P>
Each of the other tabs
displays a different sheet of configuration information.  They're
mostly self-explanatory.  Leave the cursor on a field for more
information. (And let us know what useful information is missing!)

<P>
If this locomotive has already been programmed, click "Read all" 
to read the contents of the decoder.  Note that this is a slow procedure
with some command stations; the button will come back up when its done.  
As each variable is read, it turns to white to indicate that 
the value displayed is the same as the decoder contents.  You can
move from screen to screen to watch the read operation move through the variables.

<P>
You can now go back to the "Roster Entry" tab and click "Save" to 
store the decoder contents in a file for later use.

<P>
If you want to change something, just type or click the new value.  Note
that some variables show in multiple places; they will change together.
Note that the variable will change to yellow to indicate that the decoder
does not contain the value that's being displayed.
To write your changes out to the decoder, click "Write all" or "Write sheet".

<P>
When you're finished with this locomotive, just close the window.  If any of
your changes have not been written to a file or to the decoder, you'll
get reminded and given the chance to cancel closing the window before anything is lost.

<P>
Once you've stored information in your locomotive roster, you can 
work with the stored information.  Select "New Programmer..." from the
File menu, and then press the "Ident" button next to "Use locomotive
settings for".  The programmer will talk to the locomotive on the
programming track to get its address, then use that address to select
the correct locomotive from the roster.  You can also do the 
selection manually in the selection box.  Pressing "Open Programmer"
will then open a programmer window configured for the proper decoder
type, and containing the last values stored.  This saves the long
wait while you read the configuration information from the decoder.

<P>The "Tools" window contains tools useful when creating new configuration
files for the programmer screens or decoders.  Please see
<A HREF="http://jmri.sourceforge.net/PaneProg/ConfigFile.html">http://jmri.sourceforge.net/PaneProg/ConfigFile.html</a>
for more information.
 
<P>The "Debug" menu has a couple of useful tools:

<P>
If you're connected to a LocoNet, select "LocoNet Monitor" to open 
a LocoNet monitor frame.  You should immediately start seeing LocoNet traffic 
in the top pane, which contains the last 20 messages. The controls at the bottom 
allow you to display raw data in addition to the interpreted packets, to clear the 
listing, and to write output to a log file.

<P>
If you are using an NCE command station, select "NCE Command Monitor" to open 
a monitor frame.  You won't see any traffic on this until you use one of the
other panels to do something. The controls at the bottom 
allow you to display raw data in addition to the interpreted packets, to clear the 
listing, and to write output to a log file.


<h3>For more information:</H3>

More information is available on the Decoder Pro page:
<A HREF="http://jmri.sourceforge.net/PaneProg">http://jmri.sourceforge.net/PaneProg</A>
and on the JMRI web page:   
<a href="http://jmri.sourceforge.net/">http://jmri.sourceforge.net/</a>

<P>
Feedback is greatly appreciated!  We especially welcome suggestions of what 
you'd like to see this program do.  If you encounter a problem, please let use 
know so we can fix it.  You can send email to 
<a href="mailto:jake@physics.berkeley.edu">jake@physics.berkeley.edu</a>, 
or use the web forms to 

<DL>
<DT>Report bugs:    <DD> <a href="http://sourceforge.net/tracker/?atid=388313&amp;group_id=26788&amp;func=add">http://sourceforge.net/tracker/?atid=388313&group_id=26788&func=add</a>

<DT>Request help:   <DD><a href="http://sourceforge.net/tracker/?atid=388314&amp;group_id=26788&amp;func=add">http://sourceforge.net/tracker/?atid=388314&group_id=26788&func=add</a>

<DT>Suggest improvements:   <DD><a href="http://sourceforge.net/tracker/?atid=388316&amp;group_id=26788&amp;func=add">http://sourceforge.net/tracker/?atid=388316&group_id=26788&func=add</a>
</DL>
<P>
The <A href="http://lists.sourceforge.net/lists/listinfo/jmri-announce">jmri-announce</a> 
mailing list carries announcements of new versions, major changes, etc. 
This list is intended to be very low traffic; discussions, etc, should take place elsewhere.
You can subscribe
(or unsubscribe)
using the 
<A HREF="http://lists.sourceforge.net/lists/listinfo/jmri-announce">web interface</A>. <P>

<h3>Notes: </h3>
 
Some hardware may not support the LocoNet baud rate.  If so, please let me know the 
specifics so I can create a workaround. 

<P>
The javax.comm.MRJ package, including the javax.comm.MRJ.jar file, is 
copyright 1999 Patrick Beard, <a href="mailto:beard@netscape.com">beard@netscape.com</a>.  Do not redistribute without 
permission. See <a href="http://homepage.mac.com/pcbeard/javax.comm.MRJ/">http://homepage.mac.com/pcbeard/javax.comm.MRJ/</a> for 
more information.

<P>
The LocoNet monitoring includes algorithms first seen in the llnmon program 
by Ron W. Auld.

<P>
For other important acknowledgements, please see
<a href="http://jmri.sourceforge.net/Acknowledgements.html">http://jmri.sourceforge.net/Acknowledgements.html</a>

<P>
Some of the contents of this folder are copyright 2001 Bob Jacobsen, 
<a href="mailto:jake@physics.berkeley.edu">jake@physics.berkeley.edu</a>. 
DecoderPro and JMRI are open-source projects.
For license information, see
<a href="http://www.opensource.org/licenses/artistic-license.html">http://www.opensource.org/licenses/artistic-license.html</a>.

<P>
LocoNet is a trademark of Digitrax Corp.

<P>
More information on the JMRI project is available from the in-construction 
web pages at 
<a href="http://jmri.sourceforge.net/">http://jmri.sourceforge.net/</a>. 
The source code is available vis CVS 
from that page.

<P>
To comply with the Sun trademark policy, JMRI is not an acronym.

<HR>
<BR>Site hosted by: <BR>
<A href="http://sourceforge.net"> 
<IMG src="http://sourceforge.net/sflogo.php?group_id=26788&type=1" width="88" height="31" border="0" alt="SourceForge Logo"> </A> 

<hr>
Bob Jacobsen<BR>
jake@physics.berkeley.edu

</body>
</html>
