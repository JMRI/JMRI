<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="Bob Jacobsen, LBL">
   <meta name="GENERATOR" content="Mozilla/4.75C-CCK-MCD {C-UDP; EBM-APPLE} (Macintosh; U; PPC) [Netscape]">
   <meta name="Content-Type" content="text/html; charset=iso-8859-1">
   <title>JMRI: Installation</title>
</head>
<body>

<A href="index.html">
<IMG SRC="images/logo.gif" ALIGN=RIGHT WIDTH="160" HEIGHT="135" HSPACE="0" VSPACE="0">
</a>

This page is _really_ still under construction! If you can help us make it a better page, please
join the effort.<P>

<h2>Installing JMRI</h2>

This page describes the installation options for JMRI-based applications
and gives some background on why they are structured this way.  The 
detailed installation instructions are in the README file for each application:
<UL>
<LI>
</UL>

The sections of this page are:

<UL>
<LI><A HREF="#SimpleMac9">Simple Macintosh MacOS 8/9 install</A>
<LI><A HREF="#SimpleMacX">Simple Macintosh MacOS X install</A>
<LI><A HREF="#SimpleWin">Simple Windows install</A>
<LI><A HREF="#SimpleOS2">Simple OS/2 install</A>
<LI><A HREF="#SimpleLinux">Simple Linux install</A>
</UL>

For information on Java, see the 
<A HREF="Java/InstallJava.html">Java installation</A> page.

<P>Why would you want anything other than a simple installation?
The simple installs download several large files, and you might not need
all of it.  Particularly if you already have JMRI or other
Java applications installed on your machine, you might want to update
just parts of your existing install.
In that case, you should read the 
<A HREF="background">background information</A>
then the specifics for your system:

<UL>
<LI><A HREF="#MacDetails">Macintosh details</A>
<LI><A HREF="#WinDetails">Windows details</A>
<LI><A HREF="#OS2Details">OS/2 details</A>
<LI><A HREF="#LinuxDetails">Linux details</A>
</UL>

<h3><A NAME="SimpleMac9"></A>Simple Macintosh MacOS 8/9 install</h3>
A Macintosh self-extracting archive is available.  When you
download and run it, it creates a folder containing the 
double-clickable application
and various support files.  
<P>
Unfortunately, certain older versions of MacOS did not come 
with Java preinstalled.  In that case, you need a 
"Macintosh Runtime for Java" (MRJ) installed.  Its
available for download via 
<a href="http://developer.apple.com/java/download.html">http://developer.apple.com/java/download.html</a>
<P>
Even more unfortunately, the MacOS 8/9 Java installations are
somewhat old, and don't contain the "Swing" GUI components
that are present on other machines.  Early versions of the
JMRI libraries distributed these with every Macintosh-packaged
distribution.  This made every distribution large, hence inconvenient
to download, even though the Swing libraries needed to be installed only 
once.  Starting with the *.9 versions, the Swing libraries are installed
by a separate download that only needs to be run once. 
Its available at 
<a href="http://prdownloads.sourceforge.net/jmri/JavaLibsInstaller-2.hqx">http://prdownloads.sourceforge.net/jmri/JavaLibsInstaller-2.hqx</a>.
<P>
The sequence to install "from scratch" is:
<UL>
<LI>Install an MRJ
<LI>Install the Swing libraries
<LI>Run your JMRI-based application
<LI>Relax and have fun
</UL>

<h4>Possible problems</h4>
If after the download you're left with a ".hqx"
file, rather than a folder your browser is not 
configured to expand files in "binhex" format.  You'll need a program 
like StuffIt Expander, UnStuff or similar to convert this file to 
a self-expanding archive.  Drag the .hqx file to the 
icon for one of those programs, which should convert it to 
a folder.
<P>You might also be left with a .sea file, instead of a folder.
This is an intermediate format, made from the .hqx file and then
expanded.  Just drag it to StuffIt Expander or similar. 
<P>
Once the folder exists, you can through out the related .hqx and .sea
files.

<h4>LocoNet hardware requirements</h4>

There are two hardware adapters available to connect to a LocoNet.  The
LocoBuffer is the strongly preferred alternative, as it reduces the load 
on the host computer and has a significantly smaller error rate.  The 
LocoBuffer was created by John Jabour (jjabour@optonline.net); more
information is available from the LocoNet_Info group, 
  http://groups.yahoo.com/group/loconet_hackers
The LocoBuffer should be configured with J1, J4 and J5 set on pins 1 and 2, 
J2 and J3 set to pins 2 and 3.

The Digitrax MS100 interface adapter is also supported. Note that some
systems, specifically MacOS X, can't handle the LocoNet native baud 
rate.  An MS100 can't be used on those systems.  A standard 
Macintosh RS422 serial port will not work directly with an MS100. Since 
those ports don't have two output status lines (DTR and RTS),
they can't provide correct power to the MS100.  It may be possible to 
provide external power; if you're interested in trying this, we'd
be happy to help work out a solution.

Connect a LocoBuffer or Digitrax MS100 interface to a serial port, using 
an adapter cable as needed.  For more information on the MS100, please see
  http://www.digitrax.com/computer.htm
For more information on the LocoBuffer, please see
  http://groups.yahoo.com/group/loconet_hackers/files/LocoBuffer/
  
JMRI is primarily developed on a PowerBook 400MHz. 
The demo program is tested on an MS100 and USB Macintosh using a Keyspan PDA 
Adapter to provide the serial port; for information please see 
http://jmri.sourceforge.net/DigiTrax/KeyspanAdapters/KeyspanUSB.html. 
Standard Macintosh RS422 serial ports also work; we  periodically test
on a Power Macintosh 7200/90 (90MHz) with 40MB of memory. Performance on that
machine is poor, but usable: Some windows take several seconds to open, 
and certain file operations take too long.

<h3><A NAME="SimpleMacX"></A>Simple Macintosh MacOS X install</h3>
In order for JMRI to work reliably, you need to have updated to 
at least MacOS 10.1.1.  Release 10.1 or 10.0 will have intermittent
problems that will slowly drive you crazy.  
<P>
A Macintosh self-extracting archive is available.  When you
download and run it, it creates a folder containing the 
double-clickable application
and various support files.  

<P>
You will need drivers for the serial hardware you're using.  We test
using a Keyspan PDA Adapter; those drivers are available at 
<A HREF="http://www.keyspan.com/support/macosx">http://www.keyspan.com/support/macosx</A>. 
Download the most
recent version for your hardware and run the installer.

<P>You will need to install the javax.comm package to get access to the serial ports.
An installer is available at
<A HREF="http://prdownloads.sourceforge.net/jmri/JavaCommInstaller04.hqx">http://prdownloads.sourceforge.net/jmri/JavaCommInstaller04.hqx</A>. 
Download and run that installer.

<P>
The listings of available ports may show several
different types for each port, with names 
that start with "/dev/tty" or "/dev/cu".  In that case, select the "/dev/tty" 
version for best performance.

<P>The JMRI-based application can be run by opening its folder
and clicking on the application icon.  If there are two, one
which looks right and one which looks really small, click the
one that looks right.  The "really small" one is the Classic
application, which will run under Classic instead of natively.

<h4>Hardware requirements</h4>

We use a USB Macintosh connected to a Keyspan PDA Adapter to 
provide the serial port; for information please see 
http://jmri.sourceforge.net/DigiTrax/KeyspanAdapters/KeyspanUSB.html.  

<h3><A NAME="SimpleWin"></A>Simple Windows install</h3>

A .zip format archive is available.  When you
download and expand it, it creates a folder containing the 
application jar file
and various support files.  
<P>
You will need to know where your Java installation is on your disk.  This is
called the "Java home directory" below.  The Sun installers use
  C:\Program Files\JavaSoft\JRE\<version> 
for this, for example
  C:\Program Files\JavaSoft\JRE\1.3.1
<P>
To communicate with a LocoNet or NCE system, you need to have a version 
of the javax.comm package installed on your computer.  The one from 
<A HREF="http://java.sun.com/products/javacomm/">http://java.sun.com/products/javacomm/</A>
is included with the JMRI distribution, but you have to copy some files
to their final locations.

<UL>
<LI><A HREF="http://prdownloads.sourceforge.net/jmri/JMRI.demo.0.8.win.zip">Download the archive</A>
<LI>Find the  "JMRI.demo.0.8.win.zip" file and expand it using
WinZIP or a similar program.
<LI>You should now have a "JMRI.demo.0.8" folder.  
<LI>Copy the "win32com.dll" file just unpacked to the "bin" subdirectory of your
Java home directory, for example:
<BR>copy win32com.dll C:\Program Files\JavaSoft\JRE\1.3.1\bin
<LI>Copy the "javax.comm.properties" file just unpacked to the "lib" subdirectory 
of your Java home directory, for example:
<BR>copy javax.comm.properties C:\Program Files\JavaSoft\JRE\1.3.1\lib
<LI>The installation is complete.
</UL>
<P>
To start the program, click on the JmriWin95 icon, or from a DOS command line
type:
<PRE>
  java -jar jmriwin95.jar 
</PRE>

<h3><A NAME="SimpleOS2"></A>Simple OS2 install</h3>

A .zip format archive is available.  When you
download and expand it, it creates a folder containing the 
application script
and various support files.  
<UL>
<LI>Install the swing and javacomm packages from the IBM web site.
<LI><A HREF="http://prdownloads.sourceforge.net/jmri/JMRI.demo.0.8.OS2.zip">Download the archive</A>
<LI>Find the  "JMRI.demo.0.8.OS2.zip" file and expand it using
<PRE>
  PKZIP -extr -dir JMRI.demo.0.8.OS2.zip
</PRE>
<LI>You should now have a "JMRI.demo.0.8" directory.  
The installation is complete.
</UL>

The provided JmriDemo.CMD script will start the program. Type
<PRE>
   JmriDemo
</PRE>
in the JMRI.demo.0.8 directory.

<h3><A NAME="SimpleLinux"></A>Simple Linux install</h3>

A .tar.gz format archive is available.  When you
download and expand it, it creates a folder containing the 
application script
and various support files.  
<UL>
<LI><A HREF="http://prdownloads.sourceforge.net/jmri/JMRI.demo.0.8.tar.gz">Download the archive</A>
<LI>Find the  "JMRI.demo.0.8.tar.gz" file and expand it using
<PRE>
  gunzip JMRI.demo.0.8.tar.gz
</pre>
<LI>You should now have a "JMRI.demo.0.8.tar" file.  Expand it using the command
<PRE>
  tar -xf JMRI.demo.0.8.tar
</PRE>
<LI>You should now have a "JMRI.demo.0.8" directory. 
Note that you should run the program from 
this directory.
You can move that directory to 
another location if needed.
</UL>

Unfortunately, we don't yet have clear instructions for creating the 
Java communications package needed for Linux.  There is some information
available at
<A HREF="http://www.interstice.com/~kevinh/linuxcomm.html">http://www.interstice.com/~kevinh/linuxcomm.html</A>.
You have to follow those instructions to configure your linux machine, and 
then edit the JMRI.demo.0.8/JmriDemo.tcsh
file to include the files you've created.
<P>
To start the program, type:
<PRE>
  ./JmriDemo.tcsh
</PRE>
from the JMRI.demo.0.8 directory.

<h3><A NAME="background"></A>background information</h3>
Note that this structure described in this section
is for the 0.9 release of JMRI.  If you have
something earlier than that installed, you'd be better off just erasing the
old version and starting with a simple install.
When we create later releases of JMRI, we'll provide the links to
download just the changed parts.
<P>
The JMRI-specific code is in a Java archive file called "jmri.jar".
This file changes from one JMRI release to the next. The Decoder Pro
JMRI-based application distributes its code, plus the JMRI code,
in DecoderPro.jar.
<P>There are also several .jar files in the lib subdirectory that
provide libraries needed by the JMRI demo program. When you do a 
simple install, these are included. 
They generally do not change from one release to another of the JMRI code.
Depending on what's already on
your system, you might not need dedicated copies of these:
	<UL>
	<LI>log4j.jar - This provides a configurable logging and error 
			reporting system. It allows us to capture debugging
			info when somebody has a problem, without creating
			large log files during normal operation. For more
			information, see the 
			<A HREF="http://jakarta.apache.org/log4j/docs/index.html">log4j home page</A>.
	<LI>jdom-jdk11.jar - Lightweight toolkit for reading and writing XML files.
			For more information, see the
			<A HREF="http://www.jdom.org">JDOM home page</A>.
			We are currently using the "b6" version.
	<LI>crimson.jar - An XML parser used for our configuration files.
			This is a commonly used utility. If you have other Java
			programs installed, you might already have this.
	<LI>collections.jar - Part of recent versions of Java, this file
			provides a powerful set of collection classes. 
			This is a commonly used utility. If you have other Java
			programs installed, you might already have this.
			Its small, so we include it in our distributions.
	<LI>junit.jar - Part of the development tests, we will send you this
			file if needed for debugging.  Most distributions don't have it.
	</UL>

<P>Note that these files are merged into the JmriWin95.jar file in
Windows distributions, so they won't appear separately.  We do this
because we don't have a consistent way of handling the classpath 
across the various Windows variants.

<P>XML files created while you run the program are stored in the
"prefs" folder or its subfolders.  You might want to preserve
that when you update to a newer version of the libraries.  To
do that, just move your old prefs folder to the new distribution folder,
replacing the default one that was supplied.

<P>The "xml" subdirectory is also updated from one JMRI release to the
next.  To pick up the most recent decoder configurations, etc, you
need to update this directory. Be careful to preserve any files you've
modified (and that you've not contributed, so that they appear in the
distribution). In general, the "prefs" directory is a better place to
put JMRI files you modify.  Its searched first, so your modified versions
will be picked up from there.

<P>For future releases, we plan to provide "updaters" with just the changed files.
The minimal steps to update to a new JMRI release are:
<UL>
<LI>Get a new jmri.jar or JmriWin95.jar file and drop it into the distribution directory.
This updates the program itself.
<LI>Update the contents of the xml folder/directory.  This updates data files
used by the program.
</UL>
<P>

<h3><A NAME="MacDetails"></A>Macintosh details</h3>

<h4>MacOS 8.1 through 9.2</h4>

If you want to make a Java archive (.jar) file available to any
program on your Mac, drop it into the MRJClasses folder.  Its located
inside a set of folders:
<PRE>
 System Folder
    Extensions
       MRJ Libraries
          MRJClasses
</PRE>
A single swingall.jar file in that folder, for example, will serve 
all applications that need it. 

<h4>MacOS X</h4>

<h3><A NAME="WinDetails"></A>Windows details</h3>


<h3><A NAME="OS2Details"></A>OS/2 details</h3>


<h3><A NAME="LinuxDetails"></A>Linux details</h3>


<HR>
<BR>Site hosted by: <BR>
<A href="http://sourceforge.net"> 
<IMG src="http://sourceforge.net/sflogo.php?group_id=26788&type=1" width="88" height="31" border="0" alt="SourceForge Logo"> </A> 

<hr>
Bob Jacobsen<BR>
jake@physics.berkeley.edu

</body>
</html>
