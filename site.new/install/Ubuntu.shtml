<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- $Id: Ubuntu.shtml,v 1.10 2009-07-11 19:38:44 jacobsen Exp $ -->
<html lang="en">
<head>
	<meta http-equiv="CONTENT-TYPE" content="text/html; charset=utf-8">
	
	<title>Installing JMRI on Ubuntu GNU/Linux</title>
	<meta name="GENERATOR" content="OpenOffice.org 2.2  (Linux)">
	<meta name="CREATED" content="20070720;11550900">
	<meta name="CHANGEDBY" content="peter">
	<meta name="CHANGED" content="20070720;13070200"><!-- Style -->


<!-- Style -->
  <META http-equiv=Content-Type content="text/html; charset=iso-8859-1">
  <link rel="stylesheet" type="text/css" href="/css/default.css" media="screen">
  <link rel="stylesheet" type="text/css" href="/css/print.css" media="print">
  <link rel="icon" href="/images/jmri.ico" type="image/png">
  <link rel="home" title="Home" href="/">
<!-- /Style -->

</HEAD>

<!--#include virtual="/Header" -->
<!--#include virtual="Sidebar" -->

<div id="mainContent">

<h1>Installing JMRI on Ubuntu GNU/Linux</h1>

<p>These are instructions for the installation of JMRI
on a Ubuntu Linux/GNU system. &nbsp;Though the procedure is not
complicated a script has been written to automate some of the
procedures. &nbsp; These have been used by a number of users
successfully and should work on Ubuntu, Kubuntu, XUbuntu and Debian
(The USB
port has not been tested under Debian).</p>
<p>This draft is now in its final stage.</p>


<h2>1 Introduction</h2>
<p>GNU/Linux is becoming increasingly popular as a desk
top operating system. This short instruction deals with installing
JMRI on the Ubuntu (or similar Debian based) desktop.</p>
<h3>1.1 The Problem</h3>
<p>JMRI is quite easy to install on Windows. It consists
of two stages, install Java and install JMRI. Unfortunatly GNU Linux
used to involve five stages and some command line work. &nbsp;The use
of a script to automate most of this makes the task much easier.&nbsp; </p>
<h3>1.2 Linux/GNU</h3>
<p>GNU/Linux provides a viable alternative to Windows. Is it&nbsp;free and it is also suitable for loading onto older machines
which may no longer have a viable legal OS.  It is also far less
resource hungry than current windows distributions and this is&nbsp; particularly true of Xubuntu.</p>
<h3>1.3 Ubuntu (Debian)</h3>
<p>Ubuntu is based on Debian and is recognised as being
a very user friendly distribution. Indeed in the US Dell are going to
supply computers with it pre installed. 
</p>

<p style="margin-left: 0.19cm;">Details on installing Ubuntu can be found below at
Ubuntu:<br></p><p style="margin-left: 0.19cm;">
<a href="http://www.ubuntu.com/getubuntu/download">Ubuntu
Details</a></p>
<p style="margin-left: 1.34cm;">Follow the Path
"Download" then I suggest you read up on the help page which is
offered which gives advice on how to download the iso image and
then create a bookable CD to install Ubuntu.</p>
Details for <a href="http://jmri.sourceforge.net/install/decTop.shtml">installing Xubuntu</a> have also been written.


<h2>2 Notes</h2>
In the next section we describe how to install the components
needed before JMRI can be run, then how to install JMRI itself.
Before starting that, make sure you're machine has a working
internet connection (for downloads), etc.

<h3>LocoBuffer USB</h3>
If you are planning to&nbsp; Ubuntu 7.10 and a
<a href="http://rr-cirkits.com/locobuffer-usb/LB-manual-USB.pdf">LocoBuffer-USB</a>
from 
<a href="http://rr-cirkits.com/">RR-Cirkits</a>
you will need to download the patched&nbsp;
<a href="http://rr-cirkits.com/locobuffer-usb/linux/ftdi_sio.ko">ftdi_sio.ko file</a>
&nbsp;(right click and save this file) to replace the one that came
with the distribution. 
A better option is to upgrade your system to the
Ubuntu 8.04 release which includes a fix for this driver problem.

<h2>3 Installation Steps</h2>
<p>There are three steps in Installing JMRI in Linux/GNU,
The are installation of Java, running the Install-RXTX script (which
installs the RXTX files, alters permissions on TTY devices and adds
the user to etc/group), installing JMRI itself and finally setting
up the programme environment if necessary.</p>

<h3>3.1 JAVA</h3>

One must be careful which Java is loaded. 
'java -version' will often show Java 1.4.2 gij, this one is not wanted.
The 'Blackwood' Java Virtual Machine does not work for JMRI, as it doesn't have all the needed libraries.
It's best to have the Sun "SDK" software development kit
instead of just the runtime environment (JRE).

<p>
We recommend installing from the
repositories. 

<p>System &gt; Administration &gt; Synaptic Package Manager

<p>Then search for sun-java6-jdk (or later version). 
Once you've found it, mark it to be loaded, and click apply.
You'll probably be told that a number of other packages will 
also be loaded. That's OK.

<a id="rxtx">
<h3>3.2 RxTx</h3></a>

<p>A problem here is that the RxTx in the Ubuntu
repositories does not work with JMRI! RXTX 2.1 uses a different structure than
RXTX 2.0; JMRI requires the RXTX 2.0 structure.
The "2.0.7pre2" is known to work well
and that is what is included in the automated script which can currently be downloaded</p>
<p><a href="http://downloads.sourceforge.net/jmri/RXTX-install-5.tar.gz">Download RXTX-Install</a>
<p>and place it
in a spare directory. Unpack it by double clicking, and then
extracting (extract) the file. 
The script is run by opening a terminal and giving the command "./RXTXinstall"

<p>The script will do the following:

<ul>
<li>Checks that the correct java version is installed, then copies the RXTX files to the following directories:

<ul>
<li>javax.comm.properties,&nbsp;ext/javax.comm.rxtx.properties, ext/comm.jar and ext/RXTXcomm.jar to
/usr/lib/jvm/java-6-sun-??/jre/lib/ and lib/ext
<li>i386/* to /usr/lib/jvm/java-6-sun-???/jre/lib/i386/
</ul>

<li>Makes a symbolic link in /i386/ so the program finds the correct
RxTx (ln -s librxtxSerial-2.0.7pre2.so librxtxSerial.so).

<li>Alters the permission on dev/ttyS0 and ttyS1.

<li>Backs up /etc/group and adds the user to it.

</ul>
The above description is brief, as the script itself can be opened in a text editor and studied at leisure.<br>

<h3>3.3 JMRI</h3>
<p>JMRI is downloaded in the normal manner.</p>
<p><a href="http://jmri.sourceforge.net/download/index.html#prod-rel">Download
JMRI</a> 
</p>
<p>Double
click on the .tgz file to open the File Roller, then click extract. 
</p>

<p>JMRI will created inside a "JMRI" directory which is
created inside the directory that contains the downloaded .tgz file.  Umm..</p>
<p><img src="images/JMRIdirectory.png" name="graphics2" align="left" border="0" height="120" width="374"><br><br>
</p>
<p>When PanelPro and DecoderPro are first run the look
for a hidden directory ".jmri" in the home directory.  
If they do not find it they create it.  To see this
hidden directory in the file browser select "View" and 
"Show Hidden Files".
This directory holds the preferences. If you are
experiencing difficulties  with the program failing to start up, removing the
relevant Config2.xml file from this directory should fix it.</p>

<h3>3.5 The Environment</h3>
<p>On a fresh install the environment is OK, java
-version will give 
</p>
<p>java version "1.6.0"</p>
<p>Java(TM) SE Runtime Environment (build 1.6.0-b105)</p>
<p>Java HotSpot(TM) Client VM (build 1.6.0-b105, mixed
mode, sharing)</p>
<p>If it does not this should simply be a matter of
changing the PATH variable.</p>
<p>PATH=/usr/lib/jvm/java-6-sun/jre/bin/:$PATH</p>
<p>A neater way is to alter the Start Up script.</p><p></p><p><big style="font-weight: bold;">USB Ports</big>&nbsp;</p>Often
the start up script needs altering to get the computer to "see" a USB
port by adding "-Djavax.comm.rxtx.SerialPorts=/dev/ttyUSB0" as shown
below:
<p style="margin-left: 40px;">java -noverify -Djavax.comm.rxtx.SerialPorts=/dev/ttyUSB0 -Djava.security.policy</p>
<p>Please see the&nbsp;<a href="http://jmri.sourceforge.net/install/FAQLinux.html">FAQ</a> for more details.</p>

<h2>4 Starting JMRI</h2>
<p>To start open a terminal and enter ./DecoderPro</p>

<h3>4.1 Errors</h3>
<p>If you have any problems get back to the group.</p>

<dl>
<dt>bash: ./whatever.csh: bad interpreter: No such file
or directory
<dd>Can not run the shell: Try installing csh.

<dt>bash; ./cats.csh: Permission denied
<dd>Try setting the icon to executable.

</dl>

<p style="text-align: right;">(Rev 1.7 Mon 5 May 2008)</p>

<!--#include virtual="/Footer" -->

</div></body></html>
