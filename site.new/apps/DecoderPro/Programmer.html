<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
    <TITLE>
	JMRI: DecoderPro User Guide - Create a custom programmer
    </TITLE>

    <META content="Bob Jacobsen" name=Author>
    <meta name="keywords" content="java model railroad JMRI DecoderPro user guide">

    <!-- /Style -->
    <META http-equiv=Content-Type content="text/html; charset=iso-8859-1">
    <link rel="stylesheet" type="text/css" href="../../css/default.css" media="screen">
    <link rel="stylesheet" type="text/css" href="../../css/print.css" media="print">
    <link rel="icon" href="../images/jmri-16.png" type="image/png">
    <link rel="home" title="Home" href="http://JMRI.sourceforge.net/">
    <!-- /Style -->
</head>

<body>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>

<!-- Define logo /images/decoderpro.gif -->
<!-- Header -->
    <div id="header">
	<!-- Logo -->
	<a href="/site.new/" title="Return to home page" accesskey="1">
	    <img src="/site.new//images/decoderpro.gif" width="160" height="135" alt="JMRI Logo"> </a>
	<!-- /Logo -->
	<ul id="mainNav"> <!-- Top tool bar -->
	   <li><a href="/site.new/download/"  title="Get the latest software">Download</a></li>
	   <li><a href="/site.new/apps/"      title="Learn about JMRI applications">Applications</a></li>
	   <li><a href="/site.new/hardware/"  title="What hardware does JMRI support">Hardware</a></li>
	   <li><a href="/site.new/doc/Manual/"   title="Trouble-shooting, and FAQs">Manual</a></li>
	   <li><a href="/site.new/doc/Technical/" title="Developing and extending JMRI">Developers</a></li>
	   <li><A href="/site.new/community/" title="Who is JMRI">Acknowledgements</a></li>
	</ul>

	<div id="searchform"> <!--  Search Form -->
	  <form id="search" method="get" action="http://www.google.com/custom">
	     <label for="q" title="Search JMRI.SourceForge.net">search JMRI: </label>
	     <input type="hidden" name="cof" value="LW:200;LH:95;L:http://JMRI.sourceforge.net/images/logo.gif;GIMP:#cc0000;T:black;ALC:#0000ff;GFNT:grey;LC:#990000;BGC:white;AH:center;VLC:purple;GL:0;GALT:#666633;AWFID:9262c37cefe23a86;">
	    <input type="hidden" name="domains" value="JMRI.sourceforge.net">
	    <input type="hidden" name="sitesearch" value="JMRI.sourceforge.net">
	    <input type="text" id="q" name="q" accesskey="s" size="30">
	    <input type="submit" id="submit" value="go">
	  </form>
       </div> <!--  End #searchform -->
    </div> <!-- closes #header-->
<!-- /Header -->






<hr class="hide">

<div class="nomenu" id="mBody">
<div id="mainContent">

<H1>DecoderPro User Guide</H1>
<dl class=toc>
<dt><a href="./MoreInfo.html">DecoderPro - in depth details</A></li>
<dt><a href="./Tour.html">A quick DecoderPro tour</A></li>
<dt><a HREF="./IntroXML.html">A very short introduction to XML files</a></li>
<dt><a HREF="./Files.html">What the configuration files contain and where they are located</a></li>
<dt><a href="./CreateDecoder.html">DecoderPro - Create a custom decoder definition file</a></li>
<dt><a HREF="./DecoderDetails.html">More details of decoder configuration</a></li>
<dt class=this><a href="./Programmer.html">DecoderPro - Create a custom programmer definition file</a></li>
<dt><a HREF="./RosterFile.html">How the roster is stored; updating it by hand</a></li>
<dt><a HREF="./LocoFile.html">What's in a locomotive file?</a></li>
<dt><a HREF="./Debug.html">Debugging</a></li>
</dl>

<div class=list>
<H1>DecoderPro User Guide - Create a custom programmer</H1>

<p>How do I create my own custom programmer?</p>

<p>The answer starts with the creation of an xml file in the
"programmers" subdirectory of the JMRI distribution.  The
contents of the file are described below.</p>

<dl>
<dt class=left>Specifying items to display</dt>
<dd class=first>
<p>The basic element of a programmer pane is a "display". This tells the
programmer to present a single variable.  The attributes are:
<ul>
<li><dfn>name</dfn> - (Required)
This is the "standard name" of the variable to be presented.
<li><dfn>label</dfn> -
If present, this will be used to label the variable on the pane
instead of the name or standard name of the variable.
<li><dfn>layout</dfn> -
Where to locate the label with respect to the edittable field,
e.g. the text box.  Possible values are "left", "above",
"below", "right" with a default of "right".
<li><dfn>format</dfn> -
<p>How the variable should be presented.  Numeric variables can be presented as
<ul>
<li>an editable text field, which is the default if nothing is specified
<li><dfn>hslider</dfn> - a horizontal slider
<li><dfn>vslider</dfn> - a vertical slider
</ul></p>
<p>Enum variables can be presented as
<ul>
<li>a selection box, which is the default if nothing is
specified
<li><dfn>radiobuttons</dfn> - Each possible value is presented
as an individual button
<li><dfn>checkbox</dfn> - An enum with only two states can also
be presented as a checkbox
<li><dfn>offradiobutton</dfn> - A single button that sets the 0
choice for the variable when selected
<li><dfn>onradiobutton</dfn> - A single button that sets the 1
choice for the variable when selected
</ul></p>
<p>These last two can be useful for indicating which parts of a
configuration are active; see the "Speed Table" pane of
Comprehensive.xml for an example.</p>
<li><dfn>tooltip</dfn> -
Allows you to specify a tooltip to be presented when the cursor
is left over the variable.  If not present, the tooltip defined
in the decoder file is used. (Note: This is not fully
implemented yet, but you should include them in your programmer
definitions as they will work soon)
</ul>

<p> Which name to display is controlled by the pane's  'nameFmt'
attribute, and the 'label' attribute on each display element (variable).</p>

<p>The choices are:
<ul>
<li>If a label is specified, it will be used.  Use a label if you
want absolute control over what a variable should be called, regardless
of what the decoder file calls it, and you don't like the standard name.
<li>The pane's nameFmt attribute is "item", in which case the item
name will be used regardless of what the decoder file calls the variable.
Use this is you want a uniform appearance for the pane for all decoders.
But be aware that some standard names are really so generic as to be useless.
<li>If the pane's nameFmt attribute is allowed to default, or contains "mfg",
the decoder definition file's name will be used.  This is the normal form,
as it allows a manufacturer to specify in some detail what a
variable defines.
</ul></p>
</dd>

<dt class=left>Formatting</dt>
<dd>
<p>Each pane of the programmer consists of (nested) rows and/or columns.
Columns lay out variables from top to bottom.  Rows lay out variables from
left to right.  You can nest these to achieve various effects; for an
example of this, see the "Speed Table" pane of the Comprehensive.xml file.
It has two columns, the left of each uses a row to put some sliders from
left to right.</p>
</dd>

<dt class=left>Special Elements</dt>
<dd>
There are a number of elements you can use to get the programmer
formatted exactly the way you want:
<ul>
<li><dfn>label</dfn> - Add text to a pane.
<li><dfn>separator</dfn> - Add a separator line to a pane.  If included
in a column, this will be a horizontal separator line.  If
included in a row, it will be a vertical line.
<li><dfn>cvtable</dfn> - Insert a table of CV values onto the pane.
To get the spacing right, etc, you should probably not combine
this with other variables on the same pane.
<li><dfn>fnmapping</dfn> - Show a function mapping grid.
This requires variables with specific names, see below.
<li><dfn>dccaddress</dfn> - Show a combined variable for the DCC address.  This
consists of a checkbox that selects use of short vs long address, and
a single text field for entering the address.  Depending on how
the checkbox is set, the text field will configure the CV1 short
address or the CV17/18 long address.
</ul>
</dd>

<dt class=left>Installing your new programmer</dt>
<dd>
<p>
All of the .xml files in the "programmers" subdirectory will
appear in the selection box when you create a new programmer in
Decoder Pro.  To use your new file, just put it in the
"programmers" subdirectory of the "prefs" directory and
select it.  You don't have to restart the program, as the
list is remade each time you open a new programmer window.

<p> There is an option to present/hide panes from the decoder file.  If
you're writing a very basic programmer, you might want to hide them.</p>
</dd>

</dl>

</div>

<!-- Footer -->
    <hr class="hide">
    <div id="footer">
	<ul id="bn">
	<li><a href="/site.new/sitemap/">Site Map</a></li>
	<li><a href="/site.new/contact/">Contact Us</a></li>
	</ul>

	<p>Thanks and congratulations to
	   <A href="/site.new/community/" title="Who is JMRI">
	   	all who contributed</A>! </p>

	<p>Copyright &copy; 2003,2004 JMRI Community</p>
    </div>
<!-- /Footer -->

</div><!-- closes #mainContent-->
</div> <!-- closes #mBody-->
</body>
</html>

