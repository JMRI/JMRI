<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<!-- $Id: JBuilder.html,v 1.4 2004-11-12 02:56:40 jacobsen Exp $ -->
<html lang="en">
<head>
    <TITLE>
 	JMRI: Building with JBuilder
    </TITLE>
    <META content="Bob Jacobsen" name=Author>
    <meta name="keywords" content="JMRI technical code JBuilder">

    <!-- The combination of "Define" and {Header,Style, Logo and Footer} comments -->
    <!-- are an arbitrary design pattern used by the update.pl script to -->
    <!-- easily replace the common header/footer code for all the web pages -->

    <!-- delete the following 2 Defines if you want to use the default JMRI logo -->
    <!-- or change them to reflect your alternative logo -->

<!-- Style -->
  <META http-equiv=Content-Type content="text/html; charset=iso-8859-1">
  <link rel="stylesheet" type="text/css" href="/css/default.css" media="screen">
  <link rel="stylesheet" type="text/css" href="/css/print.css" media="print">
  <link rel="icon" href="/images/jmri.ico" type="image/png">
  <link rel="home" title="Home" href="/">
<!-- /Style -->
</head>


    <p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>

<!-- Header -->
    <div id="header">
	<!-- Logo -->
	<a href="/" title="Return to home page" accesskey="1">
	    <img src="/images/logo-jmri.gif" width="160" height="135" alt="JMRI Logo"> </a>
	<!-- /Logo -->
	<ul id="mainNav"> <!-- Top tool bar -->
	   <li><a href="/download/"  title="Get the latest software">Download</a></li>
	   <li><a href="/apps/"      title="Learn about JMRI applications">Applications</a></li>
	   <li><a href="/hardware/"  title="What hardware does JMRI support">Hardware</a></li>
	   <li><a href="/doc/Manual/"   title="Trouble-shooting, and FAQs">Manual</a></li>
	   <li><a href="/doc/Technical/" title="Developing and extending JMRI">Developers</a></li>
	   <li><A href="/community/" title="Who is JMRI">Acknowledgements</a></li>
	</ul>

	<div id="searchform"> <!--  Search Form -->
	  <form id="search" method="get" action="http://www.google.com/custom">
	     <label for="q" title="Search JMRI.SourceForge.net">search JMRI: </label>
	     <input type="hidden" name="cof" value="LW:200;LH:95;L:http://JMRI.sourceforge.net/images/logo.gif;GIMP:#cc0000;T:black;ALC:#0000ff;GFNT:grey;LC:#990000;BGC:white;AH:center;VLC:purple;GL:0;GALT:#666633;AWFID:9262c37cefe23a86;">
	    <input type="hidden" name="domains" value="JMRI.sourceforge.net">
	    <input type="hidden" name="sitesearch" value="JMRI.sourceforge.net">
	    <input type="text" id="q" name="q" accesskey="s" size="30">
	    <input type="submit" id="submit" value="go">
	  </form>
       </div> <!--  End #searchform -->
    </div> <!-- closes #header-->
<!-- /Header -->

<!-- Sidebar -->
<!-- This is the common sidebar definition for Technical (developer) pages -->
    <hr class="hide">

    <div id="mBody">

	<div id="side"> <!-- Block of text on left side of page -->
	    <div style="text-align: center">Info on JMRI:</div>
	    <dl>

		<dt>Development tools</dt>
		<dd>
			<ul>
			<LI><a href="getcode.html">Getting the code via CVS</a>
			<LI><a href="CVSFAQ.html">CVS FAQs</a>
			<LI><a href="Ant.html">Building with Ant</a>
			<LI><a href="JBuilder.html">Building with JBuilder</a>
			<LI><a href="Eclipse.html">Building with Eclipse</a>
			<LI><a href="XCode.html">Building with XCode</a>
			</ul>
		</dd>

		<dt>Code Structure</dt>
		<dd>
			<ul>
			<LI><a href="IntroStructure.html">Introduction</a>
			<LI><a href="AppStructure.html">Application Structure</a>
			<LI><a href=""></a>
			<LI><a href="../../JavaDoc/doc">JavaDocs</a><ul>
				<LI><a href="../../JavaDoc/doc/index-all.html">Name Index</a>
				<LI><A HREF="../../JavaDoc/doc/index.html">Packages</A>
				<LI><A HREF="../../JavaDoc/doc/allclasses-frame.html">Class heirarchy</A>
				</UL>
			<LI><a href="Threads.html">Threads</a>
			<LI><a href="XmlPersistance.html">Xml Persistance</a>
			</ul>
		</dd>

		<dt>Techniques and Standards</dt>
		<dd>
			<ul>
			<LI><a href="RP.html">Recommended Practices</a>
			<LI><a href="I8N.html">Internationalization</a>
			<LI><a href="Logging.html">Logging &amp; Error Handling</a>
			<LI><a href="Java118.html">Working with Java 1.1.8</a>
			<LI><a href="JUnit.html">Unit testing with JUnit</a>
			</ul>
		</dd>

		<dt>How To</dt>
		<dd>
			<ul>
			<LI><a href="NewType.html">Add a New Type</a>
			<LI><a href="plugins.html">Extend with Plugins</a>
			</ul>
		</dd>

	    </dl>
	</div>
<!-- /Sidebar -->


	<div id="mainContent">
	    <!-- -------- -->
	    <!--  Teaser  --> <!-- Optional -->
	    <!-- -------- -->


	    <H1>JMRI: Building with JBuilder</H1>


Many JMRI developers are currently using Borland's JBuilder.  The Personal Edition
is available for free download at 
<A HREF="http://www.borland.com/jbuilder/personal/">http://www.borland.com/jbuilder/personal/</A>.
<P>
You may have trouble running an existing copy of JMRI or DecoderPro after installing
JBuilder.
The JBuilder install adds another version of Java and sets it as current.  When a 
Java program starts, e.g. DecoderPro, it looks for it's libraries in the current Java 
install.  So the files (from the original DecoderPro install) are still there, but it's looking 
in a different place now, and can't run.  Reinstalling DecoderPro will put the libraries 
in the current Java install, and should fix this.
<P>Once you have JBuilder installed, start it up 
once to go through the
licensing procedure. 
The steps to get a working project are then:
<UL>
<LI>Create a "project" directory.
<LI>In the project directory, do a CVS checkout of the "jbuilder" 
module from our repository (see above). This will create a "java" subdirectory 
where the JBuilder IDE will run, and load it with source, tests and resources.
It will also create and populate directories for xml and libraries in the 
project directory.
<LI>The personal edition of JBuilder insists that libraries be in specific place.
Because that place changes from computer to computer, we haven't been able to
create an installer smart enough to handle it. You have to do the following steps
manually, but just once per computer (if you check out a new copy of the source,
this should still be ok):
<UL>
<LI>Find the .jbuilder directory.  This is probably in or near your "home"
directory.  On a linux or MacOS X system, look in "~".  On Windows, you should
search for it.
<LI>In the java directory that you just checked out, there's a "lib" directory.
Copy that "lib" directory and its contents to the .jbuilder directory.
<LI>Check to make sure that the lib directory in the .jbuilder directory contains
the files README, Serialio.jar, collections.jar, 
lib/comm.jar, lib/crimson.jar, lib/jdom-jdk11.jar, 
lib/junit.jar, lib/log4j.jar, and lib/security.policy
<LI>In the java directory that you just checked out, there's a JMRILibraries.library
file.  Copy that file to the .jbuilder directory.
</UL>
<LI>Change to the newly created java subdirectory. Start JBuilder with the 
jmri.jpx file you'll find there.
<LI>Click run, and sit back to watch it go.
</UL>

<P>
JBuilder can become confused, in which case you'll have problems with seemingly
missing files, wrong class names, etc.  When that happens, remove the "classes"
folder from the project's "java" directory.

<P>The Personal Edition of JBuilder does not come with the ability to make
.jar files. (A .jar file is a "Java Archive", essentially a machine-readable
library. For example, the JMRI code is compiled into the jmri.jar file for execution.)
You can run the program from within JBuilder, but if you want to make a new jmri.jar
file to update a stand-alone copy, you need to:

<UL>
<LI>Change to the java/classes directory

<LI>From a Windows command prompt, execute the command
<PRE>
      jar cf ..\jmri.jar jmri resources apps
</PRE>
  (That 3rd item would be ../jmri.jar on Linux or MacOS X)
<LI>
This created a new "jmri.jar" file in the "java" directory of the project.  
Copy or move it to an existing JMRI directory and start the program, which should 
then be using your new code.
</UL><P>
Note 1:  The "jar" command is installed as part of a Java Software Development Kit (SDK), 
including the one installed with JBuilder.  If the jar command isn't found, search for 
a jar.exe file (any one will do, they're all the same for this purpose) and enter the 
entire pathname, e.g.
<PRE>
   C:\jdk1.3.1_04\bin\jar ..\jmri.jar jmri resources apps
</PRE>
Note 2:  If you leave a "jmri.jar" file in the java\classes directory by accident, 
it will be used instead of the class outputs of JBuilder.  This will have the effect 
of "I compiled my change, but it's not being used!" because the older version of a class 
in that jmri.jar file will be used instead of the new .class file you created by recompiling.  
Hence the recommendation that you create the new jmri.jar file one level up by 
specifying "..\jmri.jar" in the command.

<!-- Footer -->
    <hr class="hide">
    <div id="footer">
	<ul id="bn">
	<li><a href="/sitemap/">Site Map</a></li>
	<li><a href="/contact/">Contact Us</a></li>
	</ul>

	<p>Thanks and congratulations to
	   <A href="/community/" title="Who is JMRI">
	   	all who contributed</A>! </p>

	<p>Copyright &copy; 1997 - 2004 JMRI Community. 
	<P>JMRI, DecoderPro, PanelPro, DispatcherPro and associated logos are our trademarks.
	<P><A href="/Copyright.html">Additional information on copyright, trademarks and licenses is linked here.</a></p>
    
       <BR/>Site hosted by: <BR/>
        <A href="http://sourceforge.net"> 
        <IMG src="http://sourceforge.net/sflogo.php?group_id=26788&amp;type=1" width="88" height="31" border="0" alt="SourceForge Logo"> </A> 


    </div>
<!-- /Footer -->

	  </div><!-- closes #mainContent-->
	</div> <!-- closes #mBody-->
</body>
</html>

