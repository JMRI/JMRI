<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<!-- $Id: ConsistTool.html,v 1.3 2005-11-23 04:16:08 jacobsen Exp $ -->
<html lang="en">
<head>
  <TITLE>
 	JMRI: Consisting Tool
  </TITLE>
  <META http-equiv=Content-Type content="text/html; charset=iso-8859-1">

  <META content="Bob Jacobsen" name=Author>

  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <meta name="keywords"
        content="hardware layout java model railroad JMRI CMRI decoderpro panelpro tools loconet lenz nce easydcc dcc nmra">

<!-- Style -->
  <META http-equiv=Content-Type content="text/html; charset=iso-8859-1">
  <link rel="stylesheet" type="text/css" href="/css/default.css" media="screen">
  <link rel="stylesheet" type="text/css" href="/css/print.css" media="print">
  <link rel="icon" href="/images/jmri.ico" type="image/png">
  <link rel="home" title="Home" href="/">
<!-- /Style -->
</head>

<body>
  <div id="container">
    <p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>

<!-- Header -->
    <div id="header">
	<!-- Logo -->
	<a href="/" title="Return to home page" accesskey="1">
	    <img src="/images/logo-jmri.gif" width="160" height="135" alt="JMRI Logo"> </a>
	<!-- /Logo -->
	<ul id="mainNav"> <!-- Top tool bar -->
	   <li><a href="/download/"  title="Get the latest software">Download</a></li>
	   <li><a href="/apps/"      title="Learn about JMRI applications">Applications</a></li>
	   <li><a href="/hardware/"  title="What hardware does JMRI support">Hardware</a></li>
	   <li><a href="/doc/Manual/"   title="Trouble-shooting, and FAQs">Manual</a></li>
	   <li><a href="/doc/Technical/" title="Developing and extending JMRI">Developers</a></li>
	   <li><A href="/community/" title="Who is JMRI">Acknowledgements</a></li>
	</ul>

	<div id="searchform"> <!--  Search Form -->
	  <form id="search" method="get" action="http://www.google.com/custom">
	     <label for="q" title="Search JMRI.SourceForge.net">search JMRI: </label>
	     <input type="hidden" name="cof" value="LW:200;LH:95;L:http://JMRI.sourceforge.net/images/logo.gif;GIMP:#cc0000;T:black;ALC:#0000ff;GFNT:grey;LC:#990000;BGC:white;AH:center;VLC:purple;GL:0;GALT:#666633;AWFID:9262c37cefe23a86;">
	    <input type="hidden" name="domains" value="JMRI.sourceforge.net">
	    <input type="hidden" name="sitesearch" value="JMRI.sourceforge.net">
	    <input type="text" id="q" name="q" accesskey="s" size="30">
	    <input type="submit" id="submit" value="go">
	  </form>
       </div> <!--  End #searchform -->
    </div> <!-- closes #header-->
<!-- /Header -->



	  <hr class="hide">
	  <div id="mBody">
	  <div id="side"> <!-- Block of text on left side of page -->
	    <div style="text-align: center">JMRI is...</div>
	    <dl>

		<dt><h3><a href="index.html">General Tools</a></h3></dt>
		<dd>JMRI provides powerful tools for working with your
		layout.
		    <UL>
		    <LI><dfn><a href="throttle/ThrottleMain.html">Throttles</a></dfn>
		    <LI><dfn><a href="ConsistingTool.html">Consisting</a></dfn>
		    <LI><dfn><a href="../../../tools/Routes.html">Routes</a></dfn>
		    <LI><dfn><a href="../apps/Speedometer/index.html">Speedometer</a></dfn>
		    <LI><dfn><a href="../doc/scripts/index.html">Scripting</a></dfn>
		    </UL>
		</dd>

		<dt><h3><a href="../apps/LocoTools">LocoNet Tools</a></h3></dt>
		<dd> A set of Digitrax LocoNet specific tools
		    <UL>
		    <LI><dfn>LocoNet monitor</dfn>
		    <LI><dfn>Slot monitor</dfn>
		    <LI><dfn>Packet source</dfn>
		    <LI><dfn>PM4 programmer</dfn>
		    <LI><dfn>BDL16 programmer</dfn>
		    <LI><dfn>LocoIO programmer</dfn>
		    </UL>
		</dd>

		<dt><h3><a href="../apps/Automation">Layout Automation</a></h3></dt>
		<dd>JMRI can be used to automate parts 
		of your layout, from simply controlling a crossing gate
		to running trains in the background.
		    <UL>
		    <LI><dfn><a href="../apps/Signalling">Signaling</a></dfn>
		    <LI><dfn><a href="../../tools/Routes.html">Routes</a></dfn>
		    <LI><dfn><a href="../doc/scripts/index.html">Scripting</a></dfn>
		    </UL>
		</dd>

	    </dl>

<a href="http://sourceforge.net/donate/index.php?group_id=26788"><img src="http://images.sourceforge.net/images/project-support.jpg" width="88" height="32" border="0" ALIGN="RIGHT" alt="Support This Project" /> </a> 

	</div> <!-- closes #side -->



    <hr class="hide">

      <div id="mainContent">
      <!-- Page Body -->
        <H2>
		JMRI: Consisting Tool
        </H2>

        <h3>
		Background Information
        </h3>
	<p>
           There are three types of consists used on DCC systems:
	</p>
	<ul>
	<li> <p>A <i>basic</i> or <i>primary address consist</i>.  In this 
             type of consist, each locomotive is assigned the same address on 
             the programming track, or on the main with OpsMode Programming 
             (if supported by the command station and decoder). You can 
             use either a long (CV17 and CV18) or short (CV1) address for 
             a primary address consist.</p>
        </li>
	<li> 
             <p>A <i>Command Station Assisted Consist</i> (CSAC).  A command 
             station assisted consist is built using a function of your 
             command station.</p>
             
             <p>Command Station Assisted Consists go by the trade names 
                listed in the table below.  The table also lists the known 
                limitations imposed by each manufacturer. 
	     <table>
		<tr>
		   <td>Manufacturer</td>
                   <td>Trade Name</td>
                   <td>Useage Notes</td>
                </tr>
                <tr>
                   <td>Digitrax</td>
                   <td>Universal Consist</td>
                   <td>Limited to number of slots supported by the system.  
                       Allows any address to be used.</td>
               </tr>
               <tr>
                   <td>Lenz</td>
                   <td>Double Header</td>
                   <td>Limited to 2 locomotives.  Allows any address but 
                       00 to be used.</td>
               </tr>
               <tr>
                   <td>NCE</td>
                   <td>Old Style Consist</td>
                   <td>Limited to 8 locomotives.  Allows any address but 
                       00 to be used.</td>
	       </tr>
               <tr>
                   <td>EasyDCC</td>
                   <td>Standard Consist</td>
                   <td>Limited to 8 locomotives.  Allows any address but 
                       00 to be used.</td>
               <tr>
	     </table>

             <p>
                The common trait shared by all versions of CSAC is 
                that a seperate speed and direction command is sent 
                to the track for each locomotive that is in the consist.
             </p>

        </li>
	<li> 
             <p>
                a <i>Decoder Assisted Consist</i> (DAC), Which is also 
                refered to frequently as an <i>Advanced Consist</i>.
             </p>  
             <p>
                The NMRA has set asside CV19 as a dedicated location for 
                consist addresses.
             </p>
             <p>
                If CV19 contains a value other than 0, the locomotive will
                respond to speed and direction instructions on this 
                address.  Otherwise, it will respond to speed and 
                direction commands sent only on the consist address.
             </p>  
             <p>
                Since the consist address is a single CV, it is limited 
                to the range of 1 to 127.  If you add 128 to the consist 
                address, the locomotive will run backwards (relative to
                it's normal direction of travel) in the consist.
             </p>
             <p>
                For most decoders, this type of consist can be by 
                programming operations in the same ways that a basic 
                Consist can be.  We say most here because some decoders 
                block writing to any address CV using operations mode 
                programming.  
             </p>
             <p>
                The NMRA has also set aside a special command to set up a
                Decoder Assisted Consist on the mainline.  This command 
                should be supported by all decoders that support Decoder 
                Assisted Consisting.
             </p>
             <p>
                The advantage to DAC, when compared to CSAC is that only 
                one speed and direction command is sent to the entire 
                consist.
             </p>
	     <p>
                By default, locomotives in a DAC ignore function commands 
                sent to the consist address.  You can configure some decoders 
                so they will respond to function commands issued to the 
                consist address as well (through CVS 21 and 22).  If 
                supported by the decoder, The appropriate values can also 
                be configured through DecoderPro using the Consisting Tab 
                in the comprehensive programmer.
             </p>
	     <p>
		One final note, Advanced Consists operate in 28 speed steps
                (always).  You may need to make sure your throttle is 
                sending 28 speed steps to the address to avoid flickering 
                headlights.
             </p>
        </li>
        </ul>

	<h3>
	   Consisting Support in JMRI.
        </h3>
        <p>
           JMRI provides support for consists using the consist tool, 
           which is accessable through the tools menu of any JMRI 
           application.
        </p>
        <p>
           The Consisting tool provides a visual tool for manipulating the 
	   Decoder Assisted Consists and, on some command stations, 
	   Command Station Assisted Consists.  
        </p>
        <p>
           Backing up the consist tool is a consist manager.  The consist 
           manager is responsible for maintaining information about 
           existing consists and for communicating the necessary 
           information between the consist tool and the command station.
        </p>
        
	<b>Available Consist Managers</b>
        </p>
        <ul>
        <li>
	   <p>
              The <i>Generic Consist Manager</i> is used on any system 
              which does not have it's own consist manager, but supports 
              operations mode programming.  This manager is only 
              able to manipulat Decoder Assisted Consists.
           </p>
           <p>
              <i>The Generic Consist Manager bypasses any routines the 
              command station has to set the consist address.</i>  The 
              importance of this is that IF your command station provides a 
              method for you to run a consist by selecting a locomotive by 
              it's address, this won't function.  You'll need to use the 
              short address identifier you selected for the consist ID to 
              control the consist speed and direction.
           </p>
        </li>
        <li>
           <p>
	      The <i>XPressNet Consist Manager</i> uses support provided 
              by XPressNet Based systems to manipulate consists.  This 
              consist manager is able to construct a Lenz "Double Header" 
              in addition to Advanced Consists.
           </p>
           <p>
              Since this consist manager uses the consist creation 
              instructions provided by the XPressNet protocol, the Lenz 
              <i>Smart Consisting</i> feature works with consists created 
              by the tool.  On Lenz systems, <i>Smart Consisting</i> 
              refers to the ability to be able to run a consist from <i>any</i> 
              of the consisted locomotive addresses or from the consist 
              address.
           </p>
        </li>
        </ul>

	<h2>Using the Consist Tool</h2>
	<p>
	When you first open the consist tool, you will see a screen similar to the following:
        </p>
	<image src=Images/ConsistTool.jpg alt="Blank Consist Tool">
        <p>
	   on the top row are used to select between an Advanced (or 
           Decoder Assisted) Consist and a Command Station Assisted 
           Consist.  If the Command Station Assisted Consists are not 
           supported by the tool for your system, these selections will be 
           greyed out.
        </p>
	<p>
           The box Next to the label <b>Consist:</b> is used to specify the 
           consist ID.  For Decoder Assisted Consists, this should be the 
           short address used to identify the consist.  For Command 
           Station Assisted Consists, this value may automatically be 
           filled in with the lead locomotive address when you try to add 
           it to the consist.
        </p>
        <p>
           Adding a typical ID for a Decoder Assisted Consist should look 
           like the following:
        </p>
	   <image src=Images/ConsistTool-IDAdded.jpg alt="Consist Tool - ID Added">
        <p>
	   The second line of the consisting tool is used to add locomotives.
           A locomotive may be added either by entering it's number in the 
           box next to <b>New Locomotive</b> or by selecting it's number 
           from the roster drop down box.
        </p>
           <image src=Images/ConsistTool-LeadLoco.jpg alt="Lead Locomotive Selected">
        <p>
          Clicking the <b>add</b> button will add a locomotive to the 
          consist, and it will appear in the list below the second line.
        </p>
          <image src=Images/ConsistTool-LeadLocoAdded.jpg alt="Lead Locomotive Added to Consist">
        <p>
          Clicking the <b>reset</b> button will clear the information for 
          this locomotive.
        </p>
	<p>
           The <b>Direction Normal</b> checkbox is used to determine if 
           the locomotive is traveling in forward or reverse when the 
           consist is traveling forward.
        </p>
        <p>
           You may notice from the previous screen shots that this box is 
           greyed out until a lead locomotive is selected.  With 
           subsequent locomotives, you can check this box to indicate the
           direction of the locomotive relative to the lead locomotive.
        </p>
           <image src=Images/ConsistTool-SecondLoco.jpg alt="Second LocoMotive Selected - Direction Reversed">
        <p>
           After adding the second locomotive to the consist, with the
           direction reversed, you should see something like the following:
        </p>
           <image src=Images/ConsistTool-SecondLocoAdded.jpg alt="Second Locomotive Added">
        <p>
           If you made a mistake, and add a second locomotive to the 
           consist with the wrong direction, you can change it's direction 
           simply by clicking on the checkbox in the Direction Normal column.
	</p>
           <image src=Images/ConsistTool-SecondLocoDirChange.jpg alt="Second Locomotive - Direction Change">
        <p>
           The direction of the lead locomotive cannot be changed once 
           added.
        </p>
        <p>
           To delete an individual locomotive from the consist, you can
           select the <b>Del</b> button in the right most column of the 
           appropriate row of the table of addresses.
        </p>
        <p>
           To delete an entire consist you can use the <b>Delete</b> 
           button at the bottom of the screen.
        </p>
        <p>
           The throttle button at the bottom of the screen can be used to
           bring up a JMRI throttle for this address.
        </p>
        <p>
           To Add a new consist, you can select the blank entry in the 
           dropdown box next to the current consist's ID.
        </p>
	   <image src=Images/ConsistTool-NewConsist.jpg alt="Select New Consist">
        <p>
           To Recall an existing consist, you can select the appropriate 
           entry from the dropdown box next to the current consist's ID.
        </p>
	   <image src=Images/ConsistTool-SelectConsist.jpg alt="Select a Consist">
<!-- Footer -->
    <hr class="hide">
    <div id="footer">
	<ul id="bn">
	<li><a href="/sitemap/">Site Map</a></li>
	<li><a href="/contact/">Contact Us</a></li>
	</ul>

	<p>Thanks and congratulations to
	   <A href="/community/" title="Who is JMRI">
	   	all who contributed</A>! </p>

	<p>Copyright &copy; 2005 JMRI Community. 
	<P>JMRI, DecoderPro, PanelPro, DispatcherPro and associated logos are our trademarks.
	<P><A href="/Copyright.html">Additional information on copyright, trademarks and licenses is linked here.</a></p>
    
       <BR/>Site hosted by: <BR/>
        <A href="http://sourceforge.net"> 
        <IMG src="http://sourceforge.net/sflogo.php?group_id=26788&amp;type=1" width="88" height="31" border="0" alt="SourceForge Logo"> </A> 


    </div>
<!-- /Footer -->

      </div><!-- closes #mainContent-->
    </div> <!-- closes #mBody-->
  </div> <!-- closes #container -->
</body>
</html>

