<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="../XSLT/decoder.xsl"?>
<!DOCTYPE decoder-config SYSTEM "../DTD/decoder-config.dtd">

<!-- Copyright (C) JMRI 2007 All rights reserved -->
<!-- $Id: ZTC_255v2.xml,v 1.2 2008-03-08 06:39:28 jacobsen Exp $ -->
<!--                                                                        -->
<!-- JMRI is free software; you can redistribute it and/or modify it under  -->
<!-- the terms of version 2 of the GNU General Public License as published  -->
<!-- by the Free Software Foundation. See the "COPYING" file for a copy     -->
<!-- of this license.                                                       -->
<!--                                                                        -->
<!-- JMRI is distributed in the hope that it will be useful, but WITHOUT    -->
<!-- ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or  -->
<!-- FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License  -->
<!-- for more details.                                                      -->

<decoder-config>
		<version author="Ian Birchenough" version="2" lastUpdated="20080229"/>
        <version author="Ian Birchenough" version="1" lastUpdated="20071215"/>
        
<decoder>
	<family name="ZTC 255" mfg="ZTC" lowVersionID="132" highVersionID="132">
		<model model="ZTC 255" />
	</family>

	<programming direct="yes" paged="yes" 
	                     register="yes" ops="yes"></programming>

	<variables>
		<variable label="Primary Address" CV="1" comment="Short address"
						item="Short Address"  default="03">
			<shortAddressVal/></variable>
		<variable label="Vstart" CV="2"
						comment="A value of 255 corresponds to 100%">
			<decVal/></variable>
		<variable label="Acceleration Rate" CV="3"
						item="Accel" default="1">
			<decVal max="31"/></variable>
		<variable label="Deceleration Rate" CV="4"
						item="Decel" default="1">
			<decVal max="31"/></variable>
		<variable label="Vhigh" CV="5">					<decVal/></variable>
		<variable label="Vmid" CV="6">					<decVal/></variable>
		<variable label="Manufacturer Version No: " CV="7" readOnly="yes"
						item="Decoder Version"><decVal/></variable>
		<variable label="Manufacturer ID: " CV="8" readOnly="yes"
						item="Manufacturer">			<decVal/></variable>

		<variable label="Decoder RESET:" CV="8" 
						item="Reset" default="132">			<decVal/></variable>

		<variable label="Decoder Reset" CV="8"
					item="resetbit" >
			<enumVal>
				<enumChoice choice="No" />
				<enumChoice choice="Yes" value="8" />
			</enumVal>
		</variable>

		<variable label="Total PWM Period" CV="9">		<decVal/></variable>
		<variable label="Packet Time-out Value" CV="11">	<decVal/></variable>
		<variable label="Analog Power Conversion" CV="12" mask="XXXXXXXV" readOnly="yes">
			<enumVal>
				<enumChoice choice="off"/>
				<enumChoice choice="on"/>
				</enumVal></variable>
			
		<variable label="Extended Address" CV="17"
						item="Long Address" >
			<longAddressVal/></variable>
			
		<variable label="Speed Table/Mid Range Cab Speed Step" CV="25"
				comment="See RP 9.2.2 for more information. Values from 2 to 127 indicate preloaded speed tables. 0 or 1 means not used.  Values between 128 and 154 define the cab throttle position where the mid range decoder speed value is applied">
				<decVal/></variable>
<variable label="Decoder Automatic Stopping Configuration" CV="27"
				comment="Allows Automatic stop on detection of Assymetric signal 0=Disable, 1=Right Rail, 2= Left Rail, 3= Both Rails">
				<decVal/></variable>
<variable label="ZTC Talkback Configuration" CV="28"
				comment="Used to configure ZTC Talkback 0= Talkback OFF, 1= Constant Broadcast, 2= Broadcast on detection of Asymetric Signal">
				<decVal/></variable>
		<variable label="Locomotive Direction" CV="29" mask="XXXXXXXV">
			<enumVal>
				<enumChoice choice="normal"/>
				<enumChoice choice="reversed"/>
				</enumVal></variable>
		<variable label="FL Location" CV="29" mask="XXXXXXVX"
					item="Speed Step Mode">
			<enumVal>
				<enumChoice choice="14 speed step format"/>
				<enumChoice choice="28 speed step format"/>
				</enumVal></variable>
		<variable label="Power Source Conversion" CV="29" mask="XXXXXVXX"
					item="Analog (DC) Operation" >
			<enumVal>
				<enumChoice choice="NMRA Digital only"/>
				<enumChoice choice="DC conversion enabled"/>
				</enumVal></variable>
		<variable label="ZTC Talkback" CV="29" mask="XXXXVXXX"
					item="ZTC Talkback">
			<enumVal>
				<enumChoice choice="disabled"/>
				<enumChoice choice="Constant Broadcast"/>
				<enumChoice choice="Broadcast on Asymetric Signal"/>
				</enumVal></variable>
		<variable label="Speed Table Definition" CV="29" mask="XXXVXXXX">
			<enumVal>
				<enumChoice choice="Use Vstart, Vmid, Vhigh"/>
				<enumChoice choice="Use table in CVs 66 through 95"/>
				</enumVal></variable>
		<variable label="Address Format" CV="29" mask="XXVXXXXX">
			<enumVal>
				<enumChoice choice="One byte (short) address"/>
				<enumChoice choice="Two byte (extended) address"/>
				</enumVal></variable>

		<variable label="F0(f) controls output A" CV="33" mask="XXXXVXXX"
			item="FL(f) controls output 1" default="1" minOut="1" minFn="0">
			<enumVal> <enumChoice choice="No"/>	<enumChoice choice="Yes"/> </enumVal>
		</variable>
		<variable label="F0(r) controls output A" CV="34" mask="XXXXVXXX"
			item="FL(r) controls output 1" minOut="1" minFn="0">
			<enumVal> <enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal>
		</variable>
		<variable label="F0(f) controls output B" CV="33" mask="XXXVXXXX"
			item="FL(f) controls output 2" minOut="2" minFn="0">
			<enumVal> <enumChoice choice="No"/>	<enumChoice choice="Yes"/> </enumVal>
		</variable>
		<variable label="F0(r) controls output B" CV="34" mask="XXXVXXXX"
			item="FL(r) controls output 2" default="1" minOut="2" minFn="0">
			<enumVal> <enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal>
		</variable>

		<variable label="F1 controls output 1" CV="35" mask="XXXXXXXV" minOut="1" minFn="1"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F1 controls output 2" CV="35" mask="XXXXXXVX" minOut="2" minFn="1"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F1 controls output 3" CV="35" mask="XXXXXVXX" minOut="3" minFn="1"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F1 controls output 4" CV="35" mask="XXXXVXXX" minOut="4" minFn="1"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F1 controls output 5" CV="35" mask="XXXVXXXX" minOut="5" minFn="1"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F1 controls output 6" CV="35" mask="XXVXXXXX" minOut="6" minFn="1"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F1 controls output 7" CV="35" mask="XVXXXXXX" minOut="7" minFn="1"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F1 controls output 8" CV="35" mask="VXXXXXXX" minOut="8" minFn="1"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>

		<variable label="F2 controls output 1" CV="36" mask="XXXXXXXV" minOut="1" minFn="2"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F2 controls output 2" CV="36" mask="XXXXXXVX" minOut="2" minFn="2"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F2 controls output 3" CV="36" mask="XXXXXVXX" minOut="3" minFn="2"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F2 controls output 4" CV="36" mask="XXXXVXXX" minOut="4" minFn="2"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F2 controls output 5" CV="36" mask="XXXVXXXX" minOut="5" minFn="2"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F2 controls output 6" CV="36" mask="XXVXXXXX" minOut="6" minFn="2"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F2 controls output 7" CV="36" mask="XVXXXXXX" minOut="7" minFn="2"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F2 controls output 8" CV="36" mask="VXXXXXXX" minOut="8" minFn="2"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>

		<variable label="F3 controls output 1" CV="37" mask="XXXXXXXV" minOut="1" minFn="3"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F3 controls output 2" CV="37" mask="XXXXXXVX" minOut="2" minFn="3"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F3 controls output 3" CV="37" mask="XXXXXVXX" minOut="3" minFn="3"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F3 controls output 4" CV="37" mask="XXXXVXXX" minOut="4" minFn="3"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F3 controls output 5" CV="37" mask="XXXVXXXX" minOut="5" minFn="3"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F3 controls output 6" CV="37" mask="XXVXXXXX" minOut="6" minFn="3"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F3 controls output 7" CV="37" mask="XVXXXXXX" minOut="7" minFn="3"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F3 controls output 8" CV="37" mask="VXXXXXXX" minOut="8" minFn="3"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>

		<variable label="F4 controls output 1" CV="38" mask="XXXXXXXV" minOut="1" minFn="3"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F4 controls output 2" CV="38" mask="XXXXXXVX" minOut="2" minFn="3"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F4 controls output 3" CV="38" mask="XXXXXVXX" minOut="3" minFn="3"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F4 controls output 4" CV="38" mask="XXXXVXXX" minOut="4" minFn="3"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F4 controls output 5" CV="38" mask="XXXVXXXX" minOut="5" minFn="3"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F4 controls output 6" CV="38" mask="XXVXXXXX" minOut="6" minFn="3"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F4 controls output 7" CV="38" mask="XVXXXXXX" minOut="7" minFn="3"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F4 controls output 8" CV="38" mask="VXXXXXXX" minOut="8" minFn="3"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>

		<variable label="Auto Stopping Distance" CV="48"
				comment="Sets the constant Braking Distance for auto stopping 0-255">
				<decVal/></variable>	

		<variable label="Output 1 effect generated" CV="49" mask="XXVVVVVV" minOut="3">
			<enumVal>
				<enumChoice choice="Output is ON or OFF"/>
				<enumChoice choice="On/Off 8 times per second"/>
				<enumChoice choice="On/Off 3.5 times per second"/>
				<enumChoice choice="On/Off 2.5 times per second"/>
				<enumChoice choice="On/Off 2 times per second"/>
				<enumChoice choice="On/Off every second"/>
				<enumChoice choice="On/Off every 2 seconds"/>
				<enumChoice choice="On/Off every 4 seconds"/>
				<enumChoice choice="On for 0.05 seconds then Off"/>
				<enumChoice choice="On for 0.1 seconds then Off"/>
				<enumChoice choice="On for 0.2 seconds then Off"/>
				<enumChoice choice="On for 0.3 seconds then Off"/>
				<enumChoice choice="On for 0.4 seconds then Off"/>
				<enumChoice choice="On for 0.5 seconds then Off"/>
				<enumChoice choice="On for 0.6 seconds then Off"/>
				<enumChoice choice="On for 0.7 seconds then Off"/>
				<enumChoice choice="On for 0.8 seconds then Off"/>
				<enumChoice choice="On for 0.9 seconds then Off"/>
				<enumChoice choice="On for 1 second then Off"/>
				<enumChoice choice="Dim Level 1. This is the dimmest setting" />
				<enumChoice choice="Dim Level 2." />
				<enumChoice choice="Dim Level 3." />
				<enumChoice choice="Dim Level 4." />
				<enumChoice choice="Dim Level 5." />
				<enumChoice choice="Dim Level 6." />
				<enumChoice choice="Dim Level 7." />
				<enumChoice choice="Dim Level 8." />
				<enumChoice choice="Dim Level 9." />
				<enumChoice choice="Dim Level 10." />
				<enumChoice choice="Dim Level 11." />
				<enumChoice choice="Dim Level 12." />
				<enumChoice choice="Dim Level 13." />
				<enumChoice choice="Dim Level 14." />
				<enumChoice choice="Dim Level 15." />
				<enumChoice choice="Dim Level 16. This is the brightest setting" />
				<enumChoice choice="Mars effect" />
				<enumChoice choice="Beacon effect" />
				<enumChoice choice="Flame effect" />
				<enumChoice choice="Ashpan effect" />
			</enumVal>
		</variable>

		<variable label="Output 2 effect generated" CV="50" mask="XXVVVVVV" minOut="3">
			<enumVal>
				<enumChoice choice="Output is ON or OFF"/>
				<enumChoice choice="On/Off 8 times per second"/>
				<enumChoice choice="On/Off 3.5 times per second"/>
				<enumChoice choice="On/Off 2.5 times per second"/>
				<enumChoice choice="On/Off 2 times per second"/>
				<enumChoice choice="On/Off every second"/>
				<enumChoice choice="On/Off every 2 seconds"/>
				<enumChoice choice="On/Off every 4 seconds"/>
				<enumChoice choice="On for 0.05 seconds then Off"/>
				<enumChoice choice="On for 0.1 seconds then Off"/>
				<enumChoice choice="On for 0.2 seconds then Off"/>
				<enumChoice choice="On for 0.3 seconds then Off"/>
				<enumChoice choice="On for 0.4 seconds then Off"/>
				<enumChoice choice="On for 0.5 seconds then Off"/>
				<enumChoice choice="On for 0.6 seconds then Off"/>
				<enumChoice choice="On for 0.7 seconds then Off"/>
				<enumChoice choice="On for 0.8 seconds then Off"/>
				<enumChoice choice="On for 0.9 seconds then Off"/>
				<enumChoice choice="On for 1 second then Off"/>
				<enumChoice choice="Dim Level 1. This is the dimmest setting" />
				<enumChoice choice="Dim Level 2." />
				<enumChoice choice="Dim Level 3." />
				<enumChoice choice="Dim Level 4." />
				<enumChoice choice="Dim Level 5." />
				<enumChoice choice="Dim Level 6." />
				<enumChoice choice="Dim Level 7." />
				<enumChoice choice="Dim Level 8." />
				<enumChoice choice="Dim Level 9." />
				<enumChoice choice="Dim Level 10." />
				<enumChoice choice="Dim Level 11." />
				<enumChoice choice="Dim Level 12." />
				<enumChoice choice="Dim Level 13." />
				<enumChoice choice="Dim Level 14." />
				<enumChoice choice="Dim Level 15." />
				<enumChoice choice="Dim Level 16. This is the brightest setting" />
				<enumChoice choice="Mars effect" />
				<enumChoice choice="Beacon effect" />
				<enumChoice choice="Flame effect" />
				<enumChoice choice="Ashpan effect" />
			</enumVal>
		</variable>

		<variable label="Output 3 effect generated" CV="51" mask="XXVVVVVV" minOut="3">
			<enumVal>
				<enumChoice choice="Output is ON or OFF"/>
				<enumChoice choice="On/Off 8 times per second"/>
				<enumChoice choice="On/Off 3.5 times per second"/>
				<enumChoice choice="On/Off 2.5 times per second"/>
				<enumChoice choice="On/Off 2 times per second"/>
				<enumChoice choice="On/Off every second"/>
				<enumChoice choice="On/Off every 2 seconds"/>
				<enumChoice choice="On/Off every 4 seconds"/>
				<enumChoice choice="On for 0.05 seconds then Off"/>
				<enumChoice choice="On for 0.1 seconds then Off"/>
				<enumChoice choice="On for 0.2 seconds then Off"/>
				<enumChoice choice="On for 0.3 seconds then Off"/>
				<enumChoice choice="On for 0.4 seconds then Off"/>
				<enumChoice choice="On for 0.5 seconds then Off"/>
				<enumChoice choice="On for 0.6 seconds then Off"/>
				<enumChoice choice="On for 0.7 seconds then Off"/>
				<enumChoice choice="On for 0.8 seconds then Off"/>
				<enumChoice choice="On for 0.9 seconds then Off"/>
				<enumChoice choice="On for 1 second then Off"/>
				<enumChoice choice="Dim Level 1. This is the dimmest setting" />
				<enumChoice choice="Dim Level 2." />
				<enumChoice choice="Dim Level 3." />
				<enumChoice choice="Dim Level 4." />
				<enumChoice choice="Dim Level 5." />
				<enumChoice choice="Dim Level 6." />
				<enumChoice choice="Dim Level 7." />
				<enumChoice choice="Dim Level 8." />
				<enumChoice choice="Dim Level 9." />
				<enumChoice choice="Dim Level 10." />
				<enumChoice choice="Dim Level 11." />
				<enumChoice choice="Dim Level 12." />
				<enumChoice choice="Dim Level 13." />
				<enumChoice choice="Dim Level 14." />
				<enumChoice choice="Dim Level 15." />
				<enumChoice choice="Dim Level 16. This is the brightest setting" />
				<enumChoice choice="Mars effect" />
				<enumChoice choice="Beacon effect" />
				<enumChoice choice="Flame effect" />
				<enumChoice choice="Ashpan effect" />
			</enumVal>
		</variable>


		<variable label="OUTPUT4 Mode" CV="52"
				comment="0= On/Off 1-38 are different pulse periods, brilliances and lighting effects">
				<decVal/></variable>

		<variable label="Motor Feedback Enable" CV="56"
				comment="0=OFF, 1=ON">
				<decVal/></variable>

		<variable label="Feedback Proportional Gain" CV="57"
				comment="Insert comment">
				<decVal/></variable>

		<variable label="Feedback Integral Gain" CV="58"
				comment="Insert comment">
				<decVal/></variable>

		<variable label="ZTC Real Slow Mode Enable/Disable" CV="60"
				comment="Enables ZTCs own slow running mode">
				<decVal/></variable>

		<variable label="ZTC Real Slow Mode Tuning" CV="61"
				comment="allows fine tuning of the speed range">
				<decVal/></variable>

			
		<variable label="Kick Start" CV="65">			<decVal/></variable>
		<variable label="Forward Trim" CV="66">			<decVal/></variable>

		<variable label="Speed Table" CV="67">
			<speedTableVal/></variable>

		<variable label="Reverse Trim" CV="95">			<decVal/></variable>
		<variable label="User Id #1" CV="105">			<decVal/></variable>
		<variable label="User Id #2" CV="106">			<decVal/></variable>

	</variables>
</decoder>
	
<pane name="ZTC">
    <column><row><column>
			<display item="Motor Feedback Enable" format="checkbox" label=" Motor Feedback Enable 1=On"/>
			
			<display item="Feedback Proportional Gain" format="hslider" label=""/>
			<display item="Feedback Proportional Gain"/>

			<display item="Feedback Integral Gain" format="hslider" label=""/>
			<display item="Feedback Integral Gain"/>

			<display item="ZTC Real Slow Mode Enable/Disable" format="checkbox" label="ZTC Real Slow Mode Enable/Disable 1=On"/>

			<display item="ZTC Real Slow Mode Tuning" format="hslider" label=""/>
			<display item="ZTC Real Slow Mode Tuning"/>

			<display item="Decoder Automatic Stopping Configuration" format="checkbox" label="Decoder Automatic Stopping Configuration 1=On"/>

			<display item="Auto Stopping Distance" format="hslider" label=""/>
			<display item="Auto Stopping Distance"/>

			<display item="ZTC Talkback" />



			
		</column></row><separator/><row><column>
			<display item="Motor Drive Selection" 
					layout="above" label="Motor Drive Selection"/>
		</column></row></column>
</pane>
	
<pane name="Decoder RESET">
    	<column> <row> <column>
			<label label=" " />
			<display item="resetbit" />
			<label label=" " />
			
	</column> </row> </column>
</pane>
</decoder-config>


